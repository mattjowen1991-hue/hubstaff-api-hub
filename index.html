<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hubstaff API Support Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #39b54a;
            --primary-dark: #2d9340;
            --bg-dark: #0a0f1a;
            --bg-card: #111827;
            --bg-card-hover: #1a2332;
            --text-primary: #f0f4f8;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #1e293b;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-orange: #f97316;
            --accent-red: #ef4444;
            --accent-yellow: #eab308;
            --get: #22c55e;
            --post: #3b82f6;
            --put: #f97316;
            --delete: #ef4444;
            --patch: #a855f7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            background-image: 
                radial-gradient(ellipse at top, rgba(57, 181, 74, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(59, 130, 246, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            margin-top: 0.5rem;
            font-size: 1rem;
        }

        .search-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .search-container {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .search-input-wrapper {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem 1.25rem;
            padding-left: 3rem;
            font-size: 1rem;
            font-family: inherit;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(57, 181, 74, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .search-btn {
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            font-family: inherit;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(57, 181, 74, 0.3);
        }

        .quick-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .quick-btn {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            font-family: inherit;
            background: var(--bg-dark);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-btn:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
            border-color: var(--primary);
        }

        .results-section {
            margin-bottom: 2rem;
        }

        .answer-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .answer-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .answer-icon {
            width: 40px;
            height: 40px;
            background: rgba(57, 181, 74, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .answer-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .answer-content {
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .answer-content p {
            margin-bottom: 1rem;
        }

        .answer-content strong {
            color: var(--text-primary);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-supported {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        .status-indirect {
            background: rgba(249, 115, 22, 0.15);
            color: #f97316;
        }

        .status-unavailable {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .endpoints-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .endpoint-card {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            transition: all 0.2s;
        }

        .endpoint-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .method-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
        }

        .method-get { background: rgba(34, 197, 94, 0.15); color: var(--get); }
        .method-post { background: rgba(59, 130, 246, 0.15); color: var(--post); }
        .method-put { background: rgba(249, 115, 22, 0.15); color: var(--put); }
        .method-delete { background: rgba(239, 68, 68, 0.15); color: var(--delete); }
        .method-patch { background: rgba(168, 85, 247, 0.15); color: var(--patch); }

        .endpoint-path {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
            word-break: break-all;
        }

        .endpoint-description {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        .category-section {
            margin-bottom: 2rem;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            cursor: pointer;
            padding: 0.75rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            transition: all 0.2s;
        }

        .category-header:hover {
            background: var(--bg-card-hover);
        }

        .category-icon {
            width: 36px;
            height: 36px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-blue);
        }

        .category-title {
            font-size: 1.1rem;
            font-weight: 600;
            flex: 1;
        }

        .category-count {
            background: var(--bg-dark);
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .category-content {
            display: none;
            padding-left: 1rem;
        }

        .category-content.open {
            display: block;
        }

        .copy-btn {
            padding: 0.75rem 1.5rem;
            font-size: 0.9rem;
            font-family: inherit;
            background: var(--bg-dark);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .copy-btn:hover {
            background: var(--bg-card-hover);
            color: var(--primary);
            border-color: var(--primary);
        }

        .info-box {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            margin: 1rem 0;
            display: flex;
            gap: 0.75rem;
        }

        .info-box.warning {
            background: rgba(249, 115, 22, 0.1);
            border-color: rgba(249, 115, 22, 0.2);
        }

        .info-box.success {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.2);
        }

        .info-icon {
            color: var(--accent-blue);
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .info-box.warning .info-icon {
            color: var(--accent-orange);
        }

        .info-box.success .info-icon {
            color: var(--primary);
        }

        .info-content {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .knowledge-base {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin-top: 2rem;
        }

        .kb-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .kb-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
        }

        .kb-content {
            padding: 1.5rem;
            display: none;
        }

        .kb-content.open {
            display: block;
        }

        .kb-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .kb-item {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
        }

        .kb-item-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .kb-item-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        .related-topics {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .related-title {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        .related-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .related-tag {
            padding: 0.4rem 0.8rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .related-tag:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-muted);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .search-container {
                flex-direction: column;
            }

            .search-input-wrapper {
                min-width: 100%;
            }

            .endpoints-grid {
                grid-template-columns: 1fr;
            }

            .kb-grid {
                grid-template-columns: 1fr;
            }
        }

        /* =====================================================
           CAPABILITY STYLES
           ===================================================== */
        
        .capabilities-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .cap-section-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .cap-section-icon {
            font-size: 1.25rem;
        }

        .cap-section-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .cap-section-subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .capabilities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1rem;
        }

        .capability-card {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            transition: all 0.2s;
        }

        .capability-card:hover {
            border-color: var(--primary);
        }

        .cap-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .cap-icon {
            font-size: 1.25rem;
        }

        .cap-name {
            font-weight: 600;
            font-size: 1rem;
        }

        .cap-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .cap-badges {
            display: flex;
            gap: 0.4rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .cap-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .cap-yes {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        .cap-no {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        .cap-sync {
            margin-bottom: 0.75rem;
        }

        .sync-direction {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.75rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .sync-outbound {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
        }

        .sync-inbound {
            background: rgba(168, 85, 247, 0.15);
            color: #a855f7;
        }

        .sync-both {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        .sync-push {
            background: rgba(249, 115, 22, 0.15);
            color: #f97316;
        }

        .cap-limitations {
            background: rgba(239, 68, 68, 0.08);
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .cap-limit-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: #ef4444;
            margin-bottom: 0.35rem;
        }

        .cap-limitations ul {
            margin: 0;
            padding-left: 1.25rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .cap-limitations li {
            margin-bottom: 0.2rem;
        }

        .cap-notes {
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            padding: 0.75rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .cap-usecases {
            margin-top: 0.5rem;
        }

        .cap-usecase-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.35rem;
        }

        .cap-usecase-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.35rem;
        }

        .usecase-tag {
            background: var(--bg-card);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* Capabilities Matrix */
        .matrix-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin-top: 2rem;
            overflow: hidden;
        }

        .matrix-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .matrix-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
        }

        .matrix-content {
            padding: 1.5rem;
            display: none;
            overflow-x: auto;
        }

        .matrix-content.open {
            display: block;
        }

        .matrix-container {
            overflow-x: auto;
        }

        .cap-matrix {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .cap-matrix th {
            text-align: left;
            padding: 0.75rem;
            background: var(--bg-dark);
            border-bottom: 1px solid var(--border);
            font-weight: 600;
            color: var(--text-secondary);
        }

        .cap-matrix td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .cap-matrix tr:hover {
            background: var(--bg-card-hover);
        }

        .matrix-name {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .matrix-yes {
            color: #22c55e;
            font-weight: 600;
        }

        .matrix-no {
            color: #ef4444;
        }

        .matrix-sync .sync-direction {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
        }

        @media (max-width: 768px) {
            .capabilities-grid {
                grid-template-columns: 1fr;
            }
            
            .cap-matrix {
                font-size: 0.75rem;
            }
            
            .cap-matrix th, .cap-matrix td {
                padding: 0.5rem;
            }
        }

        /* =====================================================
           HELP OVERLAY STYLES
           ===================================================== */
        
        .help-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            overflow-y: auto;
        }

        .help-overlay.open {
            display: flex;
        }

        .help-modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .help-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border);
            background: var(--bg-dark);
        }

        .help-header h2 {
            margin: 0;
            font-size: 1.25rem;
            color: var(--text-primary);
        }

        .help-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .help-close:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .help-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .help-nav {
            width: 220px;
            background: var(--bg-dark);
            border-right: 1px solid var(--border);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .help-nav-btn {
            background: none;
            border: 1px solid transparent;
            color: var(--text-secondary);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            font-size: 0.9rem;
            font-family: inherit;
            transition: all 0.2s;
        }

        .help-nav-btn:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .help-nav-btn.active {
            background: rgba(57, 181, 74, 0.15);
            color: var(--primary);
            border-color: var(--primary);
        }

        .help-body {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
        }

        .help-section {
            display: none;
        }

        .help-section.active {
            display: block;
        }

        .help-section h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .help-section h4 {
            color: var(--text-primary);
            margin: 1.5rem 0 0.75rem 0;
        }

        .help-section p {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .help-section ul, .help-section ol {
            color: var(--text-secondary);
            margin-left: 1.5rem;
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .help-section code {
            background: var(--bg-dark);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--primary);
        }

        .help-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .help-table th, .help-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .help-table th {
            background: var(--bg-dark);
            color: var(--text-primary);
            font-weight: 600;
        }

        .help-table td {
            color: var(--text-secondary);
        }

        .help-table a {
            color: var(--accent-blue);
            text-decoration: none;
        }

        .help-table a:hover {
            text-decoration: underline;
        }

        .help-tip {
            background: rgba(57, 181, 74, 0.1);
            border: 1px solid rgba(57, 181, 74, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
        }

        .help-example {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
            font-style: italic;
        }

        .help-answer-type {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .help-answer-type h4 {
            margin-top: 0;
        }

        .help-faq {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .help-faq h4 {
            margin-top: 0;
            color: var(--primary);
        }

        .help-reference-card {
            background: var(--bg-dark);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .help-reference-card h4 {
            margin-top: 0;
            color: var(--primary);
        }

        .help-reference-card h4:not(:first-child) {
            margin-top: 1.5rem;
        }

        @media (max-width: 768px) {
            .help-overlay {
                padding: 0;
            }

            .help-modal {
                max-height: 100vh;
                border-radius: 0;
            }

            .help-content {
                flex-direction: column;
            }

            .help-nav {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
                padding: 0.75rem;
                gap: 0.25rem;
            }

            .help-nav-btn {
                white-space: nowrap;
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
            }

            .help-body {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üîå</div>
                <h1>Hubstaff API Assistant</h1>
            </div>
            <p class="subtitle">Get instant answers about Hubstaff API capabilities for integration questions</p>
        </header>

        <section class="search-section">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <span class="search-icon">üîç</span>
                    <input type="text" class="search-input" id="searchInput" 
                           placeholder="Ask about Hubstaff API capabilities..." 
                           autocomplete="off">
                </div>
                <button class="search-btn" onclick="handleSearch()">
                    <span>Search</span>
                    <span>‚Üí</span>
                </button>
                <button class="search-btn" onclick="clearSearch()" style="background: var(--bg-dark); border: 1px solid var(--border);">
                    <span>Clear</span>
                    <span>‚úï</span>
                </button>
            </div>
            <div class="quick-actions">
                <button class="quick-btn" onclick="quickSearch('time tracking sync')">‚è±Ô∏è Time Tracking</button>
                <button class="quick-btn" onclick="quickSearch('attendance check-in')">üìã Attendance</button>
                <button class="quick-btn" onclick="quickSearch('projects tasks')">üìÅ Projects & Tasks</button>
                <button class="quick-btn" onclick="quickSearch('screenshots monitoring')">üì∏ Screenshots</button>
                <button class="quick-btn" onclick="quickSearch('authentication oauth')">üîê Authentication</button>
                <button class="quick-btn" onclick="quickSearch('webhooks')">üîî Webhooks</button>
                <button class="quick-btn" onclick="quickSearch('rate limits')">‚ö° Rate Limits</button>
                <button class="quick-btn" onclick="quickSearch('users members')">üë• Users & Teams</button>
                <button class="quick-btn" onclick="quickSearch('developer resources')">üõ†Ô∏è Dev Resources</button>
            </div>
        </section>

        <section class="results-section" id="resultsSection">
            <div class="empty-state" id="emptyState">
                <div class="empty-icon">üí°</div>
                <h3>Ask a question about Hubstaff API</h3>
                <p>For example: "Can I sync timesheets with an ERP?" or "What authentication methods are supported?"</p>
            </div>
        </section>

        <div class="matrix-section">
            <div class="matrix-header" onclick="toggleMatrix()">
                <div class="matrix-title">
                    <span>üîÑ</span>
                    <span>API Data Capabilities Matrix</span>
                </div>
                <span id="matrixToggle">‚ñº</span>
            </div>
            <div class="matrix-content" id="matrixContent"></div>
        </div>

        <div class="knowledge-base">
            <div class="kb-header" onclick="toggleKnowledgeBase()">
                <div class="kb-title">
                    <span>üìö</span>
                    <span>API Knowledge Base Reference</span>
                </div>
                <span id="kbToggle">‚ñº</span>
            </div>
            <div class="kb-content" id="kbContent">
                <div class="kb-grid" id="kbGrid"></div>
            </div>
        </div>

        <footer style="text-align: center; padding: 2rem; margin-top: 2rem; border-top: 1px solid var(--border);">
            <p style="color: var(--text-muted); font-size: 0.85rem;">
                Hubstaff API Support Assistant v2.0 ‚Ä¢ 
                <a href="#" onclick="openHelpOverlay(); return false;" style="color: var(--primary); text-decoration: none;">üìñ User Manual</a> ‚Ä¢ 
                <a href="https://developer.hubstaff.com/" target="_blank" style="color: var(--accent-blue); text-decoration: none;">API Docs ‚Üó</a>
            </p>
        </footer>
    </div>

    <!-- Help Overlay -->
    <div id="helpOverlay" class="help-overlay">
        <div class="help-modal">
            <div class="help-header">
                <h2>üìñ User Manual</h2>
                <button class="help-close" onclick="closeHelpOverlay()">‚úï</button>
            </div>
            <div class="help-content">
                <div class="help-nav">
                    <button class="help-nav-btn active" onclick="showHelpSection('quickstart')">üöÄ Quick Start</button>
                    <button class="help-nav-btn" onclick="showHelpSection('searching')">üîç How to Search</button>
                    <button class="help-nav-btn" onclick="showHelpSection('answers')">üìñ Understanding Answers</button>
                    <button class="help-nav-btn" onclick="showHelpSection('common')">üí° Common Questions</button>
                    <button class="help-nav-btn" onclick="showHelpSection('reference')">üìã Quick Reference</button>
                </div>
                <div class="help-body">
                    <!-- Quick Start Section -->
                    <div id="help-quickstart" class="help-section active">
                        <h3>üéØ What is this tool?</h3>
                        <p>The <strong>Hubstaff API Support Assistant</strong> helps you quickly answer customer questions about what they can and can't do with the Hubstaff API ‚Äî without needing to dig through developer documentation.</p>
                        
                        <p><strong>Just type a question like you'd ask a colleague:</strong></p>
                        <ul>
                            <li>"Can the customer create projects via API?"</li>
                            <li>"Is check-in/check-out supported?"</li>
                            <li>"Can they sync timesheets to their ERP?"</li>
                        </ul>

                        <h3>üöÄ Quick Start (30 seconds)</h3>
                        <ol>
                            <li><strong>Type your question</strong> in the search box (or click a quick button)</li>
                            <li><strong>Read the answer</strong> - you'll see ‚úÖ YES, ‚ùå NO, or ‚ö†Ô∏è INDIRECT</li>
                            <li><strong>Use the information</strong> to craft your response to the customer</li>
                        </ol>
                        <p>That's it! The tool gives you everything you need to know.</p>

                        <div class="help-tip">
                            <strong>üí° Pro Tip:</strong> Click the <strong>Data Capabilities Matrix</strong> at the bottom of the page for a quick overview of what's supported for each data type.
                        </div>
                    </div>

                    <!-- Searching Section -->
                    <div id="help-searching" class="help-section">
                        <h3>üîç How to Search</h3>
                        
                        <h4>Option 1: Type a Natural Question</h4>
                        <p>Just ask what the customer is asking you:</p>
                        <table class="help-table">
                            <tr><th>Customer Asks</th><th>You Type</th></tr>
                            <tr><td>"Can we pull timesheet data into our payroll?"</td><td><code>can I get timesheets</code></td></tr>
                            <tr><td>"We want to auto-create projects from Salesforce"</td><td><code>can I create projects</code></td></tr>
                            <tr><td>"Does the API support check-in/check-out?"</td><td><code>check in check out</code></td></tr>
                            <tr><td>"Can we delete old screenshots via API?"</td><td><code>can I delete screenshots</code></td></tr>
                        </table>

                        <h4>Option 2: Click Quick Buttons</h4>
                        <p>Use the quick search buttons below the search box for common topics like Time Tracking, Attendance, Projects, Screenshots, etc.</p>

                        <h4>Option 3: Use the Capabilities Matrix</h4>
                        <ol>
                            <li>Click <strong>"üîÑ API Data Capabilities Matrix"</strong> to expand it</li>
                            <li>See at-a-glance what's supported for each data type</li>
                            <li>Click any row to search for more details</li>
                        </ol>

                        <div class="help-tip">
                            <strong>üí° Pro Tip:</strong> Keep searches simple! Use keywords like <code>create project</code> rather than long sentences.
                        </div>
                    </div>

                    <!-- Understanding Answers Section -->
                    <div id="help-answers" class="help-section">
                        <h3>üìñ Understanding the Answers</h3>

                        <div class="help-answer-type">
                            <h4>‚úÖ YES ‚Äî Fully Supported</h4>
                            <p><strong>What it means:</strong> The customer CAN do this directly via the API.</p>
                            <p><strong>You'll see:</strong></p>
                            <ul>
                                <li>üìã <strong>What you're asking</strong> - The interpreted question</li>
                                <li>‚úÖ <strong>How to achieve this</strong> - The endpoint(s) to use</li>
                                <li>üìù <strong>Notes</strong> - Additional context</li>
                                <li>üìã <strong>Requirements</strong> - Plan/add-on needed</li>
                            </ul>
                            <div class="help-example">
                                <strong>Example response to customer:</strong><br>
                                "Yes, you can create projects via the API using the POST endpoint. You'll need to be on a Team or Enterprise plan to access the API."
                            </div>
                        </div>

                        <div class="help-answer-type">
                            <h4>‚ùå NO ‚Äî Not Possible</h4>
                            <p><strong>What it means:</strong> This specific action is NOT available via the API.</p>
                            <p><strong>You'll see:</strong></p>
                            <ul>
                                <li>‚ùå <strong>Why this isn't possible</strong> - The limitation</li>
                                <li>üí° <strong>Alternative approach</strong> - Workaround if available</li>
                            </ul>
                            <div class="help-example">
                                <strong>Example response to customer:</strong><br>
                                "The API doesn't support deleting projects directly. However, you can archive projects by updating their status via the PUT endpoint."
                            </div>
                        </div>

                        <div class="help-answer-type">
                            <h4>‚ö†Ô∏è INDIRECT ‚Äî Possible with a Workaround</h4>
                            <p><strong>What it means:</strong> No direct endpoint, but the customer CAN achieve their goal differently.</p>
                            <p><strong>You'll see:</strong></p>
                            <ul>
                                <li>‚ö†Ô∏è <strong>Why this is indirect</strong> - Why there's no direct way</li>
                                <li>‚úÖ <strong>How to achieve this instead</strong> - Alternative approach(es)</li>
                            </ul>
                            <div class="help-example">
                                <strong>Example response to customer:</strong><br>
                                "Hubstaff doesn't have a dedicated check-in endpoint, but there are two ways to achieve this: Activity-based tracking (included in all plans) or GPS Geofencing with Job Sites (requires Locations add-on)."
                            </div>
                        </div>

                        <h4>Understanding Capability Badges</h4>
                        <table class="help-table">
                            <tr><th>Badge</th><th>Meaning</th></tr>
                            <tr><td><span style="color: #22c55e;">‚úì Read</span></td><td>Can retrieve/view this data</td></tr>
                            <tr><td><span style="color: #22c55e;">‚úì Create</span></td><td>Can create new records</td></tr>
                            <tr><td><span style="color: #22c55e;">‚úì Update</span></td><td>Can modify existing records</td></tr>
                            <tr><td><span style="color: #22c55e;">‚úì Delete</span></td><td>Can remove records</td></tr>
                            <tr><td><span style="color: #ef4444;">‚úó</span></td><td>This operation is NOT supported</td></tr>
                        </table>

                        <h4>Understanding Sync Directions</h4>
                        <table class="help-table">
                            <tr><th>Icon</th><th>Direction</th><th>Meaning</th></tr>
                            <tr><td>‚Üí</td><td>Outbound</td><td>Data flows FROM Hubstaff only (read-only)</td></tr>
                            <tr><td>‚Üê</td><td>Inbound</td><td>Data flows TO Hubstaff only</td></tr>
                            <tr><td>‚Üî</td><td>Bi-directional</td><td>Data can flow both ways</td></tr>
                            <tr><td>üì§</td><td>Push</td><td>Real-time notifications (webhooks)</td></tr>
                        </table>
                    </div>

                    <!-- Common Questions Section -->
                    <div id="help-common" class="help-section">
                        <h3>üí° Common Customer Questions</h3>

                        <div class="help-faq">
                            <h4>"Can we integrate with our ERP/payroll system?"</h4>
                            <p><strong>Search:</strong> <code>erp integration</code> or <code>sync payroll</code></p>
                            <p><strong>Quick Answer:</strong> Yes! API supports pulling timesheets (read-only), activities (read-only), projects (read/write), tasks (full CRUD), and users (read-only). Requires Team or Enterprise plan. Rate limit: 350 req/min.</p>
                        </div>

                        <div class="help-faq">
                            <h4>"Does the API support attendance/check-in?"</h4>
                            <p><strong>Search:</strong> <code>attendance</code> or <code>check in</code></p>
                            <p><strong>Quick Answer:</strong> Yes, two ways:</p>
                            <ol>
                                <li><strong>Activity-based</strong> (all plans): First/last activity = start/end of day</li>
                                <li><strong>Job Site Visits</strong> (Locations add-on): GPS geofencing for explicit check-in/out</li>
                            </ol>
                        </div>

                        <div class="help-faq">
                            <h4>"Can they create users via API?"</h4>
                            <p><strong>Search:</strong> <code>create user</code></p>
                            <p><strong>Quick Answer:</strong> INDIRECT ‚Äî Use the Invites endpoint to send invitations. User must accept to join. Can set role and project assignments in the invite.</p>
                        </div>

                        <div class="help-faq">
                            <h4>"Can they delete time entries?"</h4>
                            <p><strong>Search:</strong> <code>delete time entry</code></p>
                            <p><strong>Quick Answer:</strong> NO ‚Äî Must be done in the Hubstaff UI. Can create new entries, but not modify or delete existing ones.</p>
                        </div>

                        <div class="help-faq">
                            <h4>"What plan do they need for API access?"</h4>
                            <p><strong>Search:</strong> <code>plan</code></p>
                            <p><strong>Quick Answer:</strong></p>
                            <ul>
                                <li>Starter: ‚ùå Limited/No access</li>
                                <li>Team: ‚úÖ Full access</li>
                                <li>Enterprise: ‚úÖ Full access (higher limits)</li>
                            </ul>
                        </div>

                        <div class="help-faq">
                            <h4>"What's the rate limit?"</h4>
                            <p><strong>Search:</strong> <code>rate limit</code></p>
                            <p><strong>Quick Answer:</strong> 350 requests per minute per token. Monitor with X-RateLimit headers. Use exponential backoff on 429 errors.</p>
                        </div>

                        <h4>üîó Useful Links to Share</h4>
                        <table class="help-table">
                            <tr><th>Resource</th><th>When to share</th></tr>
                            <tr><td><a href="https://developer.hubstaff.com/" target="_blank">API Documentation</a></td><td>Customer wants to start integrating</td></tr>
                            <tr><td><a href="https://developer.hubstaff.com/authentication" target="_blank">Authentication Guide</a></td><td>Setting up API access</td></tr>
                            <tr><td><a href="https://github.com/NetsoftHoldings/public-api-postman" target="_blank">Postman Collection</a></td><td>Customer wants to test API</td></tr>
                            <tr><td><a href="https://hubstaff.com/pricing" target="_blank">Pricing Page</a></td><td>Customer needs to upgrade</td></tr>
                        </table>
                    </div>

                    <!-- Quick Reference Section -->
                    <div id="help-reference" class="help-section">
                        <h3>üìã Quick Reference Card</h3>
                        
                        <div class="help-reference-card">
                            <h4>Answer Types</h4>
                            <ul>
                                <li>‚úÖ <strong>YES</strong> = Directly supported</li>
                                <li>‚ùå <strong>NO</strong> = Not possible (check alternatives)</li>
                                <li>‚ö†Ô∏è <strong>INDIRECT</strong> = Possible with workaround</li>
                            </ul>

                            <h4>Common Answers at a Glance</h4>
                            <table class="help-table">
                                <tr><th>Data Type</th><th>Capabilities</th></tr>
                                <tr><td>Timesheets</td><td>READ-ONLY (pull from Hubstaff)</td></tr>
                                <tr><td>Projects</td><td>Full CRUD (except delete - archive instead)</td></tr>
                                <tr><td>Tasks</td><td>Full CRUD</td></tr>
                                <tr><td>Users</td><td>Read-only (use Invites to add)</td></tr>
                                <tr><td>Time Entries</td><td>Read + Create (no edit/delete)</td></tr>
                                <tr><td>Screenshots</td><td>Read-only</td></tr>
                                <tr><td>Check-in</td><td>Use Activities OR Job Site Visits</td></tr>
                                <tr><td>Webhooks</td><td>Read + Create + Delete</td></tr>
                            </table>

                            <h4>Requirements</h4>
                            <ul>
                                <li><strong>API Access:</strong> Team or Enterprise plan</li>
                                <li><strong>GPS/Geofencing:</strong> Locations add-on</li>
                                <li><strong>Rate Limit:</strong> 350 requests/minute</li>
                            </ul>

                            <h4>Sync Directions</h4>
                            <ul>
                                <li><strong>‚Üí Outbound</strong> = Hubstaff ‚Üí External (read-only)</li>
                                <li><strong>‚Üî Both</strong> = Bi-directional sync</li>
                                <li><strong>üì§ Push</strong> = Webhooks (real-time notifications)</li>
                            </ul>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
    </div>

    <script>
        // =====================================================
        // DATA CAPABILITIES - What can/can't be done via API
        // =====================================================
        const dataCapabilities = {
            timesheets: {
                name: "Timesheets",
                icon: "üìä",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "Aggregated time data for payroll and reporting",
                limitations: [
                    "Read-only - timesheets are generated from tracked time",
                    "Cannot create or modify timesheet entries via API",
                    "Data must be pulled from Hubstaff, cannot be pushed back"
                ],
                useCases: ["Payroll integration", "ERP sync", "Custom reporting", "BI dashboards"],
                relatedCategories: ["timesheets", "activities"]
            },
            timeEntries: {
                name: "Time Entries",
                icon: "üïê",
                read: true,
                create: true,
                update: false,
                delete: false,
                syncDirection: "both",
                description: "Individual time tracking records with start/stop times",
                limitations: [
                    "Can create new entries but cannot modify existing ones",
                    "Cannot delete time entries via API",
                    "Created entries are marked as manual time"
                ],
                useCases: ["Import time from external systems", "Bulk time entry creation", "Time logging integrations"],
                relatedCategories: ["timeEntries"]
            },
            activities: {
                name: "Activities (Tracked Time)",
                icon: "‚è±Ô∏è",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "Detailed activity data with keyboard/mouse metrics",
                limitations: [
                    "Read-only - activities are recorded by Hubstaff client",
                    "Cannot create or modify activity data",
                    "Includes productivity metrics that can't be manually set"
                ],
                useCases: ["Productivity analysis", "Detailed time reporting", "Activity monitoring dashboards"],
                relatedCategories: ["activities"]
            },
            attendance: {
                name: "Attendance",
                icon: "üìã",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "Work schedules and attendance tracking",
                limitations: [
                    "Attendance is derived from activity times (first/last activity)",
                    "Cannot mark attendance directly via API",
                    "For explicit check-in/out, use Job Site Visits with geofencing"
                ],
                useCases: ["HR system integration", "Attendance reporting", "Schedule compliance"],
                relatedCategories: ["attendance", "jobSiteVisits"],
                notes: "Two approaches: Activity-based (automatic) or Job Site Visits (GPS-based check-in/out)"
            },
            projects: {
                name: "Projects",
                icon: "üìÅ",
                read: true,
                create: true,
                update: true,
                delete: false,
                syncDirection: "both",
                description: "Project management with full read/write access",
                limitations: [
                    "Cannot delete projects via API (archive instead)",
                    "Project members managed separately via Members endpoint"
                ],
                useCases: ["Project management sync", "Auto-create projects from external system", "Two-way PM integration"],
                relatedCategories: ["projects"]
            },
            tasks: {
                name: "Tasks",
                icon: "‚úÖ",
                read: true,
                create: true,
                update: true,
                delete: true,
                syncDirection: "both",
                description: "Full CRUD operations for task management",
                limitations: [
        "Tasks must be associated with a project",
        "Task assignees managed via update endpoint",
        "Cannot create/update tasks in projects linked to an integration (Jira, Asana, Redmine, etc.) - error 11000"
    ],
                ],
                useCases: ["Task management sync", "Jira/Asana integration", "Auto-task creation", "Two-way task sync"],
                relatedCategories: ["tasks"]
            },
            users: {
                name: "Users & Members",
                icon: "üë•",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "User profiles and organization membership",
                limitations: [
                    "Cannot create users directly - use Invites endpoint instead",
                    "Cannot modify user profiles via API",
                    "Can update member roles/permissions via update_members endpoint"
                ],
                useCases: ["User directory sync", "Org chart integration", "Identity management"],
                relatedCategories: ["users", "members", "invites"],
                notes: "To add users: POST to /invites endpoint to send invitation"
            },
            screenshots: {
                name: "Screenshots",
                icon: "üì∏",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "Captured screenshots for monitoring",
                limitations: [
                    "Read-only - screenshots captured by Hubstaff client",
                    "Cannot upload, modify, or delete screenshots",
                    "URLs are time-limited signed URLs"
                ],
                useCases: ["Compliance review", "Screenshot archival", "Monitoring dashboards"],
                relatedCategories: ["screenshots"]
            },
            locations: {
                name: "GPS Locations",
                icon: "üó∫Ô∏è",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "GPS tracking data from mobile devices",
                limitations: [
                    "Read-only - locations recorded by mobile app",
                    "Cannot set or modify location data",
                    "Requires Locations add-on and mobile app usage"
                ],
                useCases: ["Fleet tracking", "Field service management", "Route analysis"],
                relatedCategories: ["locations", "jobSites", "jobSiteVisits"]
            },
            jobSites: {
                name: "Job Sites (Geofencing)",
                icon: "üìç",
                read: true,
                create: true,
                update: true,
                delete: false,
                syncDirection: "both",
                description: "Geofenced locations for field tracking",
                limitations: [
                    "Cannot delete job sites via API",
                    "Requires Locations add-on",
                    "Geofence rules define check-in/out radius"
                ],
                useCases: ["Auto-create job sites from CRM", "Sync locations from external system", "Field service integration"],
                relatedCategories: ["jobSites", "jobSiteVisits"]
            },
            webhooks: {
                name: "Webhooks",
                icon: "üîî",
                read: true,
                create: true,
                update: false,
                delete: true,
                syncDirection: "push",
                description: "Real-time event notifications to your endpoints",
                limitations: [
                    "Requires endpoint verification after creation",
                    "Cannot modify existing webhooks - delete and recreate",
                    "Events: time entries, activities, screenshots, project/task changes"
                ],
                useCases: ["Real-time sync", "Event-driven integrations", "Instant notifications"],
                relatedCategories: ["webhooks"],
                notes: "Setup: Create webhook ‚Üí Verify endpoint ‚Üí Activate"
            },
            clients: {
                name: "Clients",
                icon: "ü§ù",
                read: true,
                create: true,
                update: true,
                delete: false,
                syncDirection: "both",
                description: "Client/customer management",
                limitations: [
                    "Cannot delete clients via API",
                    "Client invoices are read-only"
                ],
                useCases: ["CRM integration", "Client sync from external system", "Customer management"],
                relatedCategories: ["clients", "invoices"]
            },
            invoices: {
                name: "Invoices & Payments",
                icon: "üßæ",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "Client and team invoices, payment records",
                limitations: [
                    "Read-only - invoices created in Hubstaff UI",
                    "Cannot create, modify, or process payments via API"
                ],
                useCases: ["Accounting integration", "Invoice export", "Payment reconciliation"],
                relatedCategories: ["invoices", "payments"]
            },
            timeOff: {
                name: "Time Off / PTO",
                icon: "üèñÔ∏è",
                read: true,
                create: false,
                update: false,
                delete: false,
                syncDirection: "outbound",
                description: "Leave requests and time-off policies",
                limitations: [
                    "Read-only - time off managed in Hubstaff UI",
                    "Cannot create or approve time-off requests via API"
                ],
                useCases: ["HR system sync", "PTO balance reporting", "Leave calendar integration"],
                relatedCategories: ["timeOff", "holidays"]
            }
        };
        
        // Comprehensive Hubstaff API Knowledge Base from official documentation
        const apiKnowledge = {
            authentication: {
                title: "Authentication",
                icon: "üîê",
                description: "OAuth 2.0, Personal Access Tokens, and App Tokens supported",
                details: [
                    "OAuth 2.0 authorization flow for third-party apps",
                    "Personal Access Tokens (PAT) for direct API access",
                    "App Tokens for server-to-server integrations",
                    "Bearer token authentication in headers",
                    "Token refresh mechanism available"
                ],
                planAccess: "Team and Enterprise plans include API access",
                status: "supported"
            },
            activities: {
                title: "Activities (Time Tracking)",
                icon: "‚è±Ô∏è",
                description: "Track work activities, time logs, and productivity metrics",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/activities", desc: "List organization activities" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/activities/updates", desc: "Get activity updates" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/activities/daily", desc: "Get daily activity summaries" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/activities/daily/updates", desc: "Get daily updates" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/last_activities", desc: "Get last activities" },
                    { method: "GET", path: "/v2/projects/{project_id}/activities", desc: "List project activities" },
                    { method: "GET", path: "/v2/projects/{project_id}/activities/updates", desc: "Get project activity updates" },
                    { method: "GET", path: "/v2/projects/{project_id}/activities/daily", desc: "Get project daily activities" },
                    { method: "GET", path: "/v2/projects/{project_id}/last_activities", desc: "Get project last activities" },
                    { method: "GET", path: "/v2/projects/{project_id}/activities/daily/updates", desc: "List project daily activities updates" }
                ],
                status: "supported"
            },
            timesheets: {
                title: "Timesheets",
                icon: "üìä",
                description: "Access timesheet data for payroll and reporting",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/timesheets", desc: "List organization timesheets" }
                ],
                details: [
                    "Contains aggregated time data per user/project",
                    "Includes tracked time, idle time, and manual time",
                    "Supports date range filtering",
                    "Can group by user, project, or date"
                ],
                status: "supported"
            },
            timeEntries: {
                title: "Time Entries",
                icon: "üïê",
                description: "Individual time entry records with start/stop times",
                endpoints: [
                    { method: "GET", path: "/v2/users/{user_id}/time_entries", desc: "List user time entries" },
                    { method: "POST", path: "/v2/users/{user_id}/time_entries", desc: "Create time entry" }
                ],
                details: [
                    "Individual time tracking records",
                    "Includes start time, stop time, and duration",
                    "Links to projects and tasks"
                ],
                status: "supported"
            },
            attendance: {
                title: "Attendance",
                icon: "üìã",
                description: "Attendance schedules, shifts, and check-in/check-out",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/attendance_schedules", desc: "List attendance schedules" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/attendance_schedules", desc: "Create attendance schedule" },
                    { method: "PUT", path: "/v2/attendance_schedules/{attendance_schedule_id}", desc: "Update attendance schedule" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/attendance_shifts", desc: "List attendance shifts" }
                ],
                details: [
                    "Attendance is derived from activity tracking (first/last activity times)",
                    "Attendance schedules define expected work hours",
                    "Attendance shifts track actual working periods",
                    "For explicit check-in/check-out: Use Job Sites with geofencing (Locations feature)"
                ],
                status: "supported",
                notes: "Attendance data is derived from time tracking. For explicit check-in/check-out, Job Site Visits API provides geolocation-based attendance."
            },
            projects: {
                title: "Projects",
                icon: "üìÅ",
                description: "Full CRUD operations for project management",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/projects", desc: "List organization projects" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/projects", desc: "Create new project" },
                    { method: "GET", path: "/v2/projects/{project_id}", desc: "Get project details" },
                    { method: "PUT", path: "/v2/projects/{project_id}", desc: "Update project" },
                    { method: "PUT", path: "/v2/projects/{project_id}/update_metadata", desc: "Update project metadata" }
                ],
                status: "supported"
            },
            tasks: {
                title: "Tasks",
                icon: "‚úÖ",
                description: "Full CRUD operations for task management",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/tasks", desc: "List organization tasks" },
                    { method: "GET", path: "/v2/projects/{project_id}/tasks", desc: "List project tasks" },
                    { method: "POST", path: "/v2/projects/{project_id}/tasks", desc: "Create task in project" },
                    { method: "GET", path: "/v2/tasks/{task_id}", desc: "Get task details" },
                    { method: "PUT", path: "/v2/tasks/{task_id}", desc: "Update task" },
                    { method: "DELETE", path: "/v2/tasks/{task_id}", desc: "Delete task" },
                    { method: "PUT", path: "/v2/tasks/{task_id}/update_metadata", desc: "Update task metadata" },
                    { method: "GET", path: "/v2/integrations/{integration_id}/tasks", desc: "List integration tasks" }
                ],
                status: "supported"
            },
            users: {
                title: "Users",
                icon: "üë§",
                description: "User profile and information access",
                endpoints: [
                    { method: "GET", path: "/v2/users/me", desc: "Get current user profile" },
                    { method: "GET", path: "/v2/users/{user_id}", desc: "Get user by ID" }
                ],
                status: "supported"
            },
            members: {
                title: "Members (Organization/Team)",
                icon: "üë•",
                description: "Manage organization and team membership",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/members", desc: "List organization members" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/members", desc: "Add organization member" },
                    { method: "PUT", path: "/v2/organizations/{organization_id}/update_members", desc: "Update organization members" },
                    { method: "GET", path: "/v2/projects/{project_id}/members", desc: "List project members" },
                    { method: "PUT", path: "/v2/projects/{project_id}/update_members", desc: "Update project members" },
                    { method: "GET", path: "/v2/teams/{team_id}/members", desc: "List team members" },
                    { method: "PUT", path: "/v2/teams/{team_id}/update_members", desc: "Update team members" }
                ],
                status: "supported"
            },
            teams: {
                title: "Teams",
                icon: "üè¢",
                description: "Team management and organization",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/teams", desc: "List organization teams" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/teams", desc: "Create team" },
                    { method: "GET", path: "/v2/teams/{team_id}", desc: "Get team details" },
                    { method: "PUT", path: "/v2/teams/{team_id}", desc: "Update team" },
                    { method: "DELETE", path: "/v2/teams/{team_id}", desc: "Delete team" },
                    { method: "GET", path: "/v2/teams/{team_id}/projects", desc: "List team projects" },
                    { method: "PUT", path: "/v2/teams/{team_id}/update_projects", desc: "Update team projects" },
                    { method: "PUT", path: "/v2/teams/{team_id}/update_metadata", desc: "Update team metadata" }
                ],
                status: "supported"
            },
            organizations: {
                title: "Organizations",
                icon: "üèõÔ∏è",
                description: "Organization-level settings and data",
                endpoints: [
                    { method: "GET", path: "/v2/organizations", desc: "List organizations" },
                    { method: "POST", path: "/v2/organizations", desc: "Create organization" },
                    { method: "GET", path: "/v2/organizations/{organization_id}", desc: "Get organization details" },
                    { method: "PUT", path: "/v2/organizations/{organization_id}/update_metadata", desc: "Update organization metadata" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/work_break_projects", desc: "Get work break projects" }
                ],
                status: "supported"
            },
            screenshots: {
                title: "Screenshots",
                icon: "üì∏",
                description: "Access captured screenshots for monitoring",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/screenshots", desc: "List organization screenshots" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/screenshots/{screenshot_id}", desc: "Get screenshot details" },
                    { method: "GET", path: "/v2/projects/{project_id}/screenshots", desc: "List project screenshots" },
                    { method: "GET", path: "/v2/projects/{project_id}/screenshots/{screenshot_id}", desc: "Get project screenshot" }
                ],
                status: "supported"
            },
            jobSites: {
                title: "Job Sites (Locations/Geofencing)",
                icon: "üìç",
                description: "Geolocation-based job sites for field tracking",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/job_sites", desc: "List job sites" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/job_sites", desc: "Create job site" },
                    { method: "GET", path: "/v2/job_sites/{job_site_id}", desc: "Get job site details" },
                    { method: "PUT", path: "/v2/job_sites/{job_site_id}", desc: "Update job site" },
                    { method: "PUT", path: "/v2/job_sites/{job_site_id}/update_rules", desc: "Update geofence rules" },
                    { method: "PUT", path: "/v2/job_sites/{job_site_id}/add_rules", desc: "Add geofence rules" },
                    { method: "PUT", path: "/v2/job_sites/{job_site_id}/remove_rules", desc: "Remove geofence rules" }
                ],
                status: "supported"
            },
            jobSiteVisits: {
                title: "Job Site Visits (Check-in/Check-out)",
                icon: "üö∂",
                description: "Track arrivals and departures at job sites",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/job_site_visits", desc: "List job site visits" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/passive_job_site_visits", desc: "List passive visits" }
                ],
                details: [
                    "Provides explicit check-in/check-out data via geofencing",
                    "Records arrival and departure times at defined locations",
                    "Ideal for field service attendance tracking"
                ],
                status: "supported"
            },
            locations: {
                title: "Locations",
                icon: "üó∫Ô∏è",
                description: "GPS location tracking data",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/locations", desc: "List organization locations" },
                    { method: "GET", path: "/v2/projects/{project_id}/locations", desc: "List project locations" }
                ],
                status: "supported"
            },
            webhooks: {
                title: "Webhooks",
                icon: "üîî",
                description: "Real-time event notifications",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/webhooks", desc: "List organization webhooks" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/webhooks", desc: "Create webhook" },
                    { method: "GET", path: "/v2/projects/{project_id}/webhooks", desc: "List project webhooks" },
                    { method: "GET", path: "/v2/users/me/webhooks", desc: "List user webhooks" },
                    { method: "GET", path: "/v2/webhooks/{webhook_id}", desc: "Get webhook details" },
                    { method: "DELETE", path: "/v2/webhooks/{webhook_id}", desc: "Delete webhook" },
                    { method: "POST", path: "/v2/webhooks/{webhook_id}/activate", desc: "Activate webhook" },
                    { method: "POST", path: "/v2/users/me/webhooks", desc: "Create me webhook" },
                    { method: "POST", path: "/v2/projects/{project_id}/webhooks", desc: "Create project webhook" }
                ],
                details: [
                    "Supported events: time_entry, activity, screenshot, project, task, user updates",
                    "Requires endpoint verification after creation",
                    "POST request sent to your URL with x-hs-verification header"
                ],
                status: "supported"
            },
            clients: {
                title: "Clients",
                icon: "ü§ù",
                description: "Client/customer management",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/clients", desc: "List clients" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/clients", desc: "Create client" },
                    { method: "GET", path: "/v2/clients/{client_id}", desc: "Get client details" },
                    { method: "PUT", path: "/v2/clients/{client_id}", desc: "Update client" },
                    { method: "PUT", path: "/v2/clients/{client_id}/update_metadata", desc: "Update client metadata" }
                ],
                status: "supported"
            },
            invites: {
                title: "Invites",
                icon: "‚úâÔ∏è",
                description: "Manage team invitations",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/invites", desc: "List invites" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/invites", desc: "Create invite" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/invites/bulk", desc: "Bulk create invites" },
                    { method: "GET", path: "/v2/invites/{invite_id}", desc: "Get invite details" },
                    { method: "PUT", path: "/v2/invites/{invite_id}", desc: "Update invite" },
                    { method: "DELETE", path: "/v2/invites/{invite_id}", desc: "Delete invite" }
                ],
                status: "supported"
            },
            notes: {
                title: "Notes",
                icon: "üìù",
                description: "User and project notes",
                endpoints: [
                    { method: "GET", path: "/v2/notes/{note_id}", desc: "Get note" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/notes", desc: "List organization notes" },
                    { method: "GET", path: "/v2/projects/{project_id}/notes", desc: "List project notes" }
                ],
                status: "supported"
            },
            rates: {
                title: "Rates (Billing)",
                icon: "üí∞",
                description: "Billing rates for users and projects",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/rates", desc: "List rates" }
                ],
                status: "supported"
            },
            invoices: {
                title: "Invoices",
                icon: "üßæ",
                description: "Client and team invoicing",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/client_invoices", desc: "List client invoices" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/team_invoices", desc: "List team invoices" }
                ],
                status: "supported"
            },
            payments: {
                title: "Payments",
                icon: "üí≥",
                description: "Team payment records",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/team_payments", desc: "List team payments" },
                    { method: "GET", path: "/v2/team_payments/{team_payment_id}", desc: "Get payment details" }
                ],
                status: "supported"
            },
            toolUsages: {
                title: "Tool/App Usage",
                icon: "üñ•Ô∏è",
                description: "Application and website usage tracking",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/tool_usages", desc: "List tool usages" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/tool_usages/daily", desc: "Daily tool usage" },
                    { method: "GET", path: "/v2/projects/{project_id}/tool_usages", desc: "Project tool usages" },
                    { method: "GET", path: "/v2/projects/{project_id}/tool_usages/daily", desc: "Project daily tool usage" }
                ],
                status: "supported"
            },
            timeOff: {
                title: "Time Off",
                icon: "üèñÔ∏è",
                description: "Leave/PTO management",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/time_off_policies", desc: "List time off policies" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/time_off_requests", desc: "List time off requests" }
                ],
                status: "supported"
            },
            holidays: {
                title: "Holidays",
                icon: "üéÑ",
                description: "Organization holiday schedules",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/holidays", desc: "List holidays" }
                ],
                status: "supported"
            },
            budgets: {
                title: "Budgets",
                icon: "üìà",
                description: "Project and client budget tracking",
                endpoints: [
                    { method: "GET", path: "/v2/budget_histories/{budget_history_id}", desc: "Get budget history" },
                    { method: "GET", path: "/v2/clients/{client_id}/budget_histories", desc: "Client budget histories" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/budget_histories", desc: "Organization budget histories" },
                    { method: "GET", path: "/v2/projects/{project_id}/budget_histories", desc: "Project budget histories" }
                ],
                status: "supported"
            },
            limits: {
                title: "Limits",
                icon: "‚è∞",
                description: "Work hour limits and tracking",
                endpoints: [
                    { method: "GET", path: "/v2/limit_histories/{limit_history_id}", desc: "Get limit history" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/limit_histories", desc: "List limit histories" }
                ],
                status: "supported"
            },
            integrations: {
                title: "Integrations",
                icon: "üîó",
                description: "Third-party integrations management",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/integrations", desc: "List integrations" },
                    { method: "GET", path: "/v2/integrations/{integration_id}/project_links", desc: "Integration project links" },
                    { method: "GET", path: "/v2/integrations/{integration_id}/user_links", desc: "Integration user links" },
                    { method: "GET", path: "/v2/projects/{project_id}/integration_links", desc: "Project integration links" }
                ],
                status: "supported"
            },
            timeEditLogs: {
                title: "Time Edit Logs",
                icon: "üìú",
                description: "Audit trail for time modifications",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/time_edit_logs", desc: "Organization time edit logs" },
                    { method: "GET", path: "/v2/projects/{project_id}/time_edit_logs", desc: "Project time edit logs" }
                ],
                status: "supported"
            },
            insights: {
                title: "Insights & Smart Notifications",
                icon: "üîÆ",
                description: "Productivity insights and alerts",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/insights/smart_notification_rules", desc: "List notification rules" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/insights/smart_notification_rules", desc: "Create rule" },
                    { method: "GET", path: "/v2/insights/smart_notification_rules/{rule_id}", desc: "Get rule" },
                    { method: "PUT", path: "/v2/insights/smart_notification_rules/{rule_id}", desc: "Update rule" },
                    { method: "DELETE", path: "/v2/insights/smart_notification_rules/{rule_id}", desc: "Delete rule" },
                    { method: "POST", path: "/v2/insights/smart_notification_rules/{rule_id}/toggle_status", desc: "Toggle rule status" },
                    { method: "PATCH", path: "/v2/insights/smart_notification_rules/{rule_id}/toggle_status", desc: "Toggle smart notification rule" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/insights/smart_notifications", desc: "List notifications" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/insights/unusual_activities", desc: "Unusual activities" }
                ],
                status: "supported"
            },
            globalTodos: {
                title: "Global To-Do's",
                icon: "üìå",
                description: "Organization-wide to-do items",
                endpoints: [
                    { method: "GET", path: "/v2/organizations/{organization_id}/global_todos", desc: "List global to-dos" },
                    { method: "POST", path: "/v2/organizations/{organization_id}/global_todos", desc: "Create global to-do" },
                    { method: "GET", path: "/v2/organizations/{organization_id}/global_todos/{id}", desc: "Get global to-do" },
                    { method: "PUT", path: "/v2/organizations/{organization_id}/global_todos/{id}", desc: "Update global to-do" },
                    { method: "DELETE", path: "/v2/organizations/{organization_id}/global_todos/{id}", desc: "Delete global to-do" }
                ],
                status: "supported"
            },
            errorCodes: {
                title: "Error Codes",
                icon: "‚ö†Ô∏è",
                description: "API error code reference",
                endpoints: [
                    { method: "GET", path: "/v2/error_codes", desc: "List all error codes" }
                ],
                status: "supported"
            },
            rateLimits: {
                title: "Rate Limits",
                icon: "‚ö°",
                description: "API request rate limiting",
                details: [
                    "350 requests per minute per token",
                    "Rate limit headers: X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset",
                    "429 Too Many Requests returned when exceeded",
                    "Use exponential backoff for retries"
                ],
                status: "info"
            },
            plans: {
                title: "API Plan Access",
                icon: "üìã",
                description: "Which Hubstaff plans include API access",
                details: [
                    "Starter: Limited/No API access",
                    "Team: Full API access included",
                    "Enterprise: Full API access with higher limits",
                    "API tokens managed in organization settings"
                ],
                status: "info"
            }
        };

        // =====================================================
        // HUBSTAFF TASKS API - tasks.hubstaff.com/api/v1
        // =====================================================
        const tasksApiKnowledge = {
            tasksAttachments: {
                title: "Attachments (Tasks API)",
                icon: "üìé",
                description: "View file attachments on tasks",
                endpoints: [
                    { method: "GET", path: "/v1/tasks/{task_id}/attachments", desc: "List all attachments for a task" }
                ],
                capabilities: ["View attachments", "List task files"],
                limitations: ["Read-only - cannot upload/delete attachments via API"]
            },
            tasksChecklists: {
                title: "Checklists (Tasks API)",
                icon: "‚òëÔ∏è",
                description: "View task checklists and their items",
                endpoints: [
                    { method: "GET", path: "/v1/checklists/{checklist_id}", desc: "Get a specific checklist" },
                    { method: "GET", path: "/v1/checklists/{checklist_id}/items", desc: "List items in a checklist" },
                    { method: "GET", path: "/v1/tasks/{task_id}/checklists", desc: "List all checklists for a task" }
                ],
                capabilities: ["View checklists", "View checklist items"],
                limitations: ["Read-only - cannot create/update/delete checklists via API"]
            },
            tasksComments: {
                title: "Comments (Tasks API)",
                icon: "üí¨",
                description: "Add comments and discussions to tasks",
                endpoints: [
                    { method: "GET", path: "/v1/tasks/{task_id}/comments", desc: "List all comments on a task" },
                    { method: "POST", path: "/v1/tasks/{task_id}/comments", desc: "Add a comment to a task" }
                ],
                capabilities: ["View comments", "Add new comments"],
                limitations: ["Cannot edit or delete existing comments via API"]
            },
            tasksFolders: {
                title: "Folders (Tasks API)",
                icon: "üìÇ",
                description: "Organize projects into folders",
                endpoints: [
                    { method: "GET", path: "/v1/folders", desc: "List all folders" },
                    { method: "GET", path: "/v1/folders/{folder_id}", desc: "Get a specific folder" },
                    { method: "GET", path: "/v1/organizations/{organization_id}/folders", desc: "List folders in an organization" },
                    { method: "POST", path: "/v1/organizations/{organization_id}/folders", desc: "Create a new folder" }
                ],
                capabilities: ["List folders", "View folder details", "Create folders"],
                limitations: ["Cannot update or delete folders via API"]
            },
            tasksLabels: {
                title: "Labels (Tasks API)",
                icon: "üè∑Ô∏è",
                description: "Categorize tasks with color-coded labels",
                endpoints: [
                    { method: "GET", path: "/v1/projects/{project_id}/labels", desc: "List all labels in a project" },
                    { method: "POST", path: "/v1/projects/{project_id}/labels", desc: "Create a new label" }
                ],
                capabilities: ["View labels", "Create labels"],
                limitations: ["Cannot update or delete labels via API"]
            },
            tasksLists: {
                title: "Lists (Tasks API)",
                icon: "üìë",
                description: "Organize tasks into lists (like Kanban columns)",
                endpoints: [
                    { method: "GET", path: "/v1/lists/{list_id}", desc: "Get a specific list" },
                    { method: "GET", path: "/v1/projects/{project_id}/lists", desc: "List all lists in a project" },
                    { method: "POST", path: "/v1/projects/{project_id}/lists", desc: "Create a new list" }
                ],
                capabilities: ["View lists", "Create lists"],
                limitations: ["Cannot update or delete lists via API"]
            },
            tasksMembers: {
                title: "Members (Tasks API)",
                icon: "üë§",
                description: "View organization members and their roles",
                endpoints: [
                    { method: "GET", path: "/v1/members/me", desc: "Get current authenticated member" },
                    { method: "GET", path: "/v1/members/{member_id}", desc: "Get a specific member" },
                    { method: "GET", path: "/v1/organizations/{organization_id}/members", desc: "List members in an organization" },
                    { method: "GET", path: "/v1/projects/{project_id}/members", desc: "List members in a project" }
                ],
                capabilities: ["View member details", "List organization members", "List project members"],
                limitations: ["Read-only - cannot add/remove/update members via API"]
            },
            tasksOrganizations: {
                title: "Organizations (Tasks API)",
                icon: "üè¢",
                description: "View organizations and their settings",
                endpoints: [
                    { method: "GET", path: "/v1/organizations", desc: "List all organizations" },
                    { method: "GET", path: "/v1/organizations/{organization_id}", desc: "Get a specific organization" }
                ],
                capabilities: ["View organizations", "View organization details"],
                limitations: ["Read-only - cannot create/update organizations via API"]
            },
            tasksProjects: {
                title: "Projects (Tasks API)",
                icon: "üìÅ",
                description: "Create and manage projects for task organization",
                endpoints: [
                    { method: "GET", path: "/v1/projects", desc: "List all projects" },
                    { method: "GET", path: "/v1/projects/{project_id}", desc: "Get a specific project" },
                    { method: "GET", path: "/v1/folders/{folder_id}/projects", desc: "List projects in a folder" },
                    { method: "POST", path: "/v1/folders/{folder_id}/projects", desc: "Create a project in a folder" },
                    { method: "GET", path: "/v1/organizations/{organization_id}/projects", desc: "List projects in an organization" }
                ],
                capabilities: ["List projects", "View project details", "Create projects in folders"],
                limitations: ["Cannot update or delete projects via API"]
            },
            tasksTasks: {
                title: "Tasks (Tasks API)",
                icon: "‚úÖ",
                description: "Create, update, and track tasks",
                endpoints: [
                    { method: "GET", path: "/v1/tasks/{task_id}", desc: "Get a specific task" },
                    { method: "PATCH", path: "/v1/tasks/{task_id}", desc: "Update a task" },
                    { method: "PATCH", path: "/v1/tasks/{task_id}/complete", desc: "Mark a task as complete" },
                    { method: "GET", path: "/v1/tasks/my/assigned", desc: "List tasks assigned to current user" },
                    { method: "GET", path: "/v1/lists/{list_id}/tasks", desc: "List tasks in a list" },
                    { method: "POST", path: "/v1/lists/{list_id}/tasks", desc: "Create a task in a list" },
                    { method: "GET", path: "/v1/projects/{project_id}/tasks", desc: "List tasks in a project" }
                ],
                capabilities: ["Create tasks", "Update tasks", "Complete tasks", "View assigned tasks"],
                limitations: ["Cannot delete tasks via API"]
            },
            tasksTimeEntries: {
                title: "Time Entries (Tasks API)",
                icon: "‚è±Ô∏è",
                description: "Track time spent on tasks",
                endpoints: [
                    { method: "GET", path: "/v1/tasks/{task_id}/time_entries", desc: "List time entries for a task" },
                    { method: "POST", path: "/v1/tasks/{task_id}/time_entries", desc: "Create a time entry for a task" }
                ],
                capabilities: ["View time entries", "Log time to tasks"],
                limitations: ["Cannot update or delete time entries via API"]
            }
        };

        // =====================================================
        // DEVELOPER RESOURCES & GUIDES
        // =====================================================
        const developerResources = {
            officialDocs: {
                title: "Official Documentation",
                icon: "üìñ",
                links: [
                    { name: "API Documentation", url: "https://developer.hubstaff.com/", desc: "Interactive API docs with endpoint explorer" },
                    { name: "Authentication Guide", url: "https://developer.hubstaff.com/authentication", desc: "OAuth 2.0 and token setup instructions" }
                ]
            },
            codeExamples: {
                title: "Official Code Examples",
                icon: "üíª",
                links: [
                    { name: "Node.js Demo", url: "https://github.com/NetsoftHoldings/public-api-nodejs-demo", desc: "Express.js app using openid-client package" },
                    { name: "PHP Demo", url: "https://github.com/NetsoftHoldings/public-api-php-demo", desc: "CLI tool using php-openid-client" },
                    { name: "Postman Collection", url: "https://github.com/NetsoftHoldings/public-api-postman", desc: "Ready-to-use Postman collection for testing" }
                ]
            },
            authSpecs: {
                title: "Authentication Standards",
                icon: "üîê",
                links: [
                    { name: "OpenID Connect Specs", url: "https://openid.net/specs/", desc: "OIDC protocol specification" },
                    { name: "JWT.io", url: "https://jwt.io/", desc: "JWT debugger and library reference" },
                    { name: "OAuth 2.0 RFC", url: "https://tools.ietf.org/html/rfc6749", desc: "OAuth 2.0 authorization framework" }
                ]
            },
            keyEndpoints: {
                title: "Key API Endpoints",
                icon: "üåê",
                links: [
                    { name: "API Base URL", url: "https://api.hubstaff.com/", desc: "Main API endpoint (v2)" },
                    { name: "Account/Auth Domain", url: "https://account.hubstaff.com/", desc: "OpenID Connect discovery endpoint" },
                    { name: "Tasks API Base URL", url: "https://tasks.hubstaff.com/api/", desc: "Hubstaff Tasks API (v1)" }
                ]
            },
            tokenInfo: {
                title: "Token Management",
                icon: "üé´",
                details: [
                    "Personal Access Tokens (PAT) generate short-lived access tokens",
                    "Access tokens must be refreshed periodically using refresh_token",
                    "Store refresh_token securely - it's long-lived",
                    "Use OpenID Connect discovery to get token endpoints automatically",
                    "Discovery URL: https://account.hubstaff.com/.well-known/openid-configuration"
                ]
            },
            configExample: {
                title: "Token Config Example",
                icon: "‚öôÔ∏è",
                code: `{
    "token": {
        "refresh_token": "your_personal_access_token_here"
    }
}`
            }
        };

        // =====================================================
        // CAPABILITY DISPLAY FUNCTIONS
        // =====================================================
        
        function getCapabilityBadge(canDo, label) {
            if (canDo) {
                return `<span class="cap-badge cap-yes">‚úì ${label}</span>`;
            } else {
                return `<span class="cap-badge cap-no">‚úó ${label}</span>`;
            }
        }

        function getSyncDirectionDisplay(direction) {
            const directions = {
                'outbound': { icon: '‚Üí', label: 'Hubstaff ‚Üí External Only', class: 'sync-outbound' },
                'inbound': { icon: '‚Üê', label: 'External ‚Üí Hubstaff Only', class: 'sync-inbound' },
                'both': { icon: '‚Üî', label: 'Bi-directional Sync', class: 'sync-both' },
                'push': { icon: 'üì§', label: 'Push Notifications (Webhooks)', class: 'sync-push' }
            };
            const d = directions[direction] || directions['outbound'];
            return `<span class="sync-direction ${d.class}">${d.icon} ${d.label}</span>`;
        }

        function renderCapabilityCard(capKey) {
            const cap = dataCapabilities[capKey];
            if (!cap) return '';

            return `
                <div class="capability-card">
                    <div class="cap-header">
                        <span class="cap-icon">${cap.icon}</span>
                        <span class="cap-name">${cap.name}</span>
                    </div>
                    <div class="cap-description">${cap.description}</div>
                    <div class="cap-badges">
                        ${getCapabilityBadge(cap.read, 'Read')}
                        ${getCapabilityBadge(cap.create, 'Create')}
                        ${getCapabilityBadge(cap.update, 'Update')}
                        ${getCapabilityBadge(cap.delete, 'Delete')}
                    </div>
                    <div class="cap-sync">
                        ${getSyncDirectionDisplay(cap.syncDirection)}
                    </div>
                    ${cap.limitations.length > 0 ? `
                        <div class="cap-limitations">
                            <div class="cap-limit-title">‚ö†Ô∏è Limitations:</div>
                            <ul>
                                ${cap.limitations.map(l => `<li>${l}</li>`).join('')}
                            </ul>
                        </div>
                    ` : ''}
                    ${cap.notes ? `
                        <div class="cap-notes">
                            <strong>üí° Note:</strong> ${cap.notes}
                        </div>
                    ` : ''}
                    ${cap.useCases.length > 0 ? `
                        <div class="cap-usecases">
                            <div class="cap-usecase-title">Common Use Cases:</div>
                            <div class="cap-usecase-tags">
                                ${cap.useCases.map(u => `<span class="usecase-tag">${u}</span>`).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function findRelevantCapabilities(query) {
            const q = query.toLowerCase();
            const matched = [];
            
            // Keyword to capability mapping
            const capabilityKeywords = {
                'timesheet': ['timesheets'],
                'time entry': ['timeEntries'],
                'time entries': ['timeEntries'],
                'activity': ['activities'],
                'activities': ['activities'],
                'tracking': ['activities', 'timesheets'],
                'attendance': ['attendance'],
                'check-in': ['attendance', 'jobSites'],
                'check-out': ['attendance', 'jobSites'],
                'checkin': ['attendance', 'jobSites'],
                'checkout': ['attendance', 'jobSites'],
                'project': ['projects'],
                'task': ['tasks'],
                'user': ['users'],
                'member': ['users'],
                'team': ['users'],
                'screenshot': ['screenshots'],
                'location': ['locations', 'jobSites'],
                'gps': ['locations', 'jobSites'],
                'geofence': ['jobSites'],
                'job site': ['jobSites'],
                'webhook': ['webhooks'],
                'notification': ['webhooks'],
                'real-time': ['webhooks'],
                'realtime': ['webhooks'],
                'client': ['clients'],
                'customer': ['clients'],
                'invoice': ['invoices'],
                'payment': ['invoices'],
                'payroll': ['timesheets', 'timeEntries'],
                'erp': ['timesheets', 'projects', 'tasks', 'users'],
                'sync': ['timesheets', 'projects', 'tasks', 'timeEntries'],
                'integrate': ['timesheets', 'projects', 'tasks', 'webhooks'],
                'integration': ['timesheets', 'projects', 'tasks', 'webhooks'],
                'odoo': ['timesheets', 'projects', 'attendance'],
                'export': ['timesheets', 'activities', 'screenshots'],
                'import': ['timeEntries', 'projects', 'tasks'],
                'time off': ['timeOff'],
                'pto': ['timeOff'],
                'leave': ['timeOff'],
                'vacation': ['timeOff'],
                'holiday': ['timeOff']
            };

            // Find matching capabilities
            const matchedCaps = new Set();
            Object.entries(capabilityKeywords).forEach(([keyword, caps]) => {
                if (q.includes(keyword)) {
                    caps.forEach(cap => matchedCaps.add(cap));
                }
            });

            // Also check data capability names directly
            Object.keys(dataCapabilities).forEach(key => {
                const cap = dataCapabilities[key];
                if (cap.name.toLowerCase().includes(q) || 
                    cap.description.toLowerCase().includes(q) ||
                    cap.useCases.some(u => u.toLowerCase().includes(q))) {
                    matchedCaps.add(key);
                }
            });

            return Array.from(matchedCaps);
        }

        function renderCapabilitiesSection(capabilities) {
            if (capabilities.length === 0) return '';

            return `
                <div class="capabilities-section">
                    <div class="cap-section-header">
                        <span class="cap-section-icon">üîÑ</span>
                        <span class="cap-section-title">Data Capabilities</span>
                    </div>
                    <div class="cap-section-subtitle">What can be synced, created, updated, or read via the API</div>
                    <div class="capabilities-grid">
                        ${capabilities.map(cap => renderCapabilityCard(cap)).join('')}
                    </div>
                </div>
            `;
        }

        function renderCapabilitiesMatrix() {
            return `
                <div class="matrix-container">
                    <table class="cap-matrix">
                        <thead>
                            <tr>
                                <th>Data Type</th>
                                <th>Read</th>
                                <th>Create</th>
                                <th>Update</th>
                                <th>Delete</th>
                                <th>Sync Direction</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${Object.entries(dataCapabilities).map(([key, cap]) => `
                                <tr onclick="quickSearch('${cap.name.toLowerCase()}')" style="cursor: pointer;">
                                    <td class="matrix-name">
                                        <span>${cap.icon}</span>
                                        <span>${cap.name}</span>
                                    </td>
                                    <td class="${cap.read ? 'matrix-yes' : 'matrix-no'}">${cap.read ? '‚úì' : '‚úó'}</td>
                                    <td class="${cap.create ? 'matrix-yes' : 'matrix-no'}">${cap.create ? '‚úì' : '‚úó'}</td>
                                    <td class="${cap.update ? 'matrix-yes' : 'matrix-no'}">${cap.update ? '‚úì' : '‚úó'}</td>
                                    <td class="${cap.delete ? 'matrix-yes' : 'matrix-no'}">${cap.delete ? '‚úì' : '‚úó'}</td>
                                    <td class="matrix-sync">${getSyncDirectionDisplay(cap.syncDirection)}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function renderKnowledgeBase() {
            const grid = document.getElementById('kbGrid');
            grid.innerHTML = Object.entries(apiKnowledge).map(([key, item]) => `
                <div class="kb-item" onclick="quickSearch('${item.title.toLowerCase()}')">
                    <div class="kb-item-title">
                        <span>${item.icon}</span>
                        <span>${item.title}</span>
                    </div>
                    <div class="kb-item-desc">${item.description}</div>
                </div>
            `).join('');
        }

        function toggleKnowledgeBase() {
            const content = document.getElementById('kbContent');
            const toggle = document.getElementById('kbToggle');
            content.classList.toggle('open');
            toggle.textContent = content.classList.contains('open') ? '‚ñ≤' : '‚ñº';
        }

        function quickSearch(query) {
            document.getElementById('searchInput').value = query;
            handleSearch();
        }

        function handleSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query.trim()) return;

            const results = analyzeQuery(query);
            displayResults(results, query);
        }

        function analyzeQuery(query) {
            const results = {
                matches: [],
                summary: "",
                relatedTopics: []
            };

            // Keyword mapping for better matching
            const keywordMap = {
                'timesheet': ['timesheets', 'activities', 'timeEntries'],
                'time': ['timesheets', 'activities', 'timeEntries', 'timeEditLogs'],
                'tracking': ['activities', 'timesheets', 'screenshots', 'toolUsages'],
                'attendance': ['attendance', 'jobSiteVisits', 'jobSites'],
                'check-in': ['jobSiteVisits', 'attendance'],
                'check-out': ['jobSiteVisits', 'attendance'],
                'checkin': ['jobSiteVisits', 'attendance'],
                'checkout': ['jobSiteVisits', 'attendance'],
                'project': ['projects', 'tasks'],
                'task': ['tasks', 'globalTodos'],
                'user': ['users', 'members'],
                'member': ['members', 'teams', 'invites'],
                'team': ['teams', 'members'],
                'screenshot': ['screenshots'],
                'location': ['locations', 'jobSites', 'jobSiteVisits'],
                'gps': ['locations', 'jobSites'],
                'geofence': ['jobSites', 'jobSiteVisits'],
                'webhook': ['webhooks'],
                'notification': ['webhooks', 'insights'],
                'auth': ['authentication'],
                'oauth': ['authentication'],
                'token': ['authentication'],
                'rate': ['rateLimits', 'rates'],
                'limit': ['rateLimits', 'limits'],
                'erp': ['timesheets', 'activities', 'projects', 'tasks', 'users'],
                'sync': ['timesheets', 'activities', 'webhooks', 'projects', 'tasks'],
                'integration': ['integrations', 'webhooks'],
                'odoo': ['timesheets', 'activities', 'projects', 'attendance'],
                'payroll': ['timesheets', 'payments', 'invoices'],
                'invoice': ['invoices', 'payments'],
                'payment': ['payments', 'invoices'],
                'budget': ['budgets', 'rates'],
                'client': ['clients', 'invoices'],
                'report': ['activities', 'timesheets', 'screenshots'],
                'plan': ['plans', 'rateLimits'],
                'pricing': ['plans'],
                'monitor': ['screenshots', 'toolUsages', 'insights'],
                'app': ['toolUsages'],
                'website': ['toolUsages'],
                'holiday': ['holidays', 'timeOff'],
                'leave': ['timeOff', 'holidays'],
                'pto': ['timeOff'],
                'vacation': ['timeOff', 'holidays'],
                // Tasks API keywords
                'tasks api': ['tasksTasks', 'tasksProjects', 'tasksLists'],
                'hubstaff tasks': ['tasksTasks', 'tasksProjects', 'tasksLists'],
                'checklist': ['tasksChecklists'],
                'task comment': ['tasksComments'],
                'task label': ['tasksLabels'],
                'kanban': ['tasksLists', 'tasksTasks'],
                'task list': ['tasksLists'],
                'task folder': ['tasksFolders'],
                'complete task': ['tasksTasks'],
                'assigned tasks': ['tasksTasks'],
                // Developer resources keywords
                'code example': ['developerResources'],
                'sample code': ['developerResources'],
                'node': ['developerResources'],
                'nodejs': ['developerResources'],
                'php': ['developerResources'],
                'postman': ['developerResources'],
                'jwt': ['developerResources', 'authentication'],
                'openid': ['developerResources', 'authentication'],
                'oidc': ['developerResources', 'authentication'],
                'discovery': ['developerResources', 'authentication'],
                'refresh token': ['developerResources', 'authentication'],
                'access token': ['developerResources', 'authentication'],
                'developer': ['developerResources'],
                'getting started': ['developerResources', 'authentication'],
                'setup': ['developerResources', 'authentication'],
                'example': ['developerResources']
            };

            // Find matching categories
            const matchedCategories = new Set();
            
            Object.entries(keywordMap).forEach(([keyword, categories]) => {
                if (query.includes(keyword)) {
                    categories.forEach(cat => matchedCategories.add(cat));
                }
            });

            // Also check Tasks API knowledge
            Object.entries(tasksApiKnowledge).forEach(([key, data]) => {
                const titleMatch = data.title && data.title.toLowerCase().includes(query);
                const descMatch = data.description && data.description.toLowerCase().includes(query);
                if (titleMatch || descMatch) {
                    matchedCategories.add(key);
                }
            });

            // Also do direct matching on category names
            Object.keys(apiKnowledge).forEach(key => {
                const item = apiKnowledge[key];
                if (item.title.toLowerCase().includes(query) || 
                    item.description.toLowerCase().includes(query) ||
                    query.includes(item.title.toLowerCase())) {
                    matchedCategories.add(key);
                }
            });

            // If no matches, show general info
            if (matchedCategories.size === 0) {
                matchedCategories.add('authentication');
                matchedCategories.add('rateLimits');
                matchedCategories.add('plans');
            }

            matchedCategories.forEach(cat => {
                if (apiKnowledge[cat]) {
                    results.matches.push(apiKnowledge[cat]);
                }
            });

            // Generate summary based on query
            results.summary = generateSummary(query, results.matches);
            results.relatedTopics = getRelatedTopics(matchedCategories);

            return results;
        }

        function checkCanDo(query) {
            const q = query.toLowerCase();
            
            // Enhanced capabilities with full context
            const capabilities = {
                // ===== PROJECTS =====
                'create project': { 
                    answer: 'YES', 
                    question: 'Can I create projects via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/projects', desc: 'Create a new project' }
                    ],
                    notes: ['Full CRUD supported for projects', 'Can set name, description, and client assignment'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: []
                },
                'update project': { 
                    answer: 'YES', 
                    question: 'Can I update/edit projects via the API?',
                    howTo: [
                        { method: 'PUT', endpoint: '/v2/projects/{project_id}', desc: 'Update project details' },
                        { method: 'PUT', endpoint: '/v2/projects/{project_id}/update_metadata', desc: 'Update project metadata' }
                    ],
                    notes: ['Can update name, description, status, and client'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: []
                },
                'delete project': { 
                    answer: 'NO', 
                    question: 'Can I delete projects via the API?',
                    howTo: [],
                    notes: ['Projects cannot be deleted via API'],
                    requirements: [],
                    limitations: ['No DELETE endpoint exists for projects'],
                    alternatives: [
                        { method: 'PUT', endpoint: '/v2/projects/{project_id}', desc: 'Archive the project by updating its status instead' }
                    ]
                },

                // ===== TASKS =====
                'create task': { 
                    answer: 'YES', 
                    question: 'Can I create tasks via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/projects/{project_id}/tasks', desc: 'Create a task in a project' }
                    ],
                    notes: ['Full CRUD supported for tasks', 'Tasks must be associated with a project'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: [
        'Cannot create tasks in projects linked to a task integration (Jira, Asana, Redmine, etc.) - error code 11000',
        'To use API for task creation, the project must not have an active task integration'
    ]
                },
                'update task': { 
                    answer: 'YES', 
                    question: 'Can I update/edit tasks via the API?',
                    howTo: [
                        { method: 'PUT', endpoint: '/v2/tasks/{task_id}', desc: 'Update task details' },
                        { method: 'PUT', endpoint: '/v2/tasks/{task_id}/update_metadata', desc: 'Update task metadata' }
                    ],
                    notes: ['Can update name, description, assignees, and status'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: []
                },
                'delete task': { 
                    answer: 'YES', 
                    question: 'Can I delete tasks via the API?',
                    howTo: [
                        { method: 'DELETE', endpoint: '/v2/tasks/{task_id}', desc: 'Delete a task' }
                    ],
                    notes: ['Tasks can be permanently deleted'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Deletion is permanent - cannot be undone']
                },

                // ===== TIMESHEETS & TIME =====
                'get timesheet': { 
                    answer: 'YES', 
                    question: 'Can I get/export timesheet data via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/timesheets', desc: 'Get aggregated timesheet data' }
                    ],
                    notes: ['Read-only access to aggregated time data', 'Supports date range filtering', 'Can group by user, project, or date'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Read-only - cannot modify timesheets']
                },
                'create timesheet': { 
                    answer: 'NO', 
                    question: 'Can I create/add timesheets via the API?',
                    howTo: [],
                    notes: ['Timesheets are automatically generated from tracked time'],
                    requirements: [],
                    limitations: ['No POST endpoint exists - timesheets are derived data'],
                    alternatives: [
                        { method: 'POST', endpoint: '/v2/users/{user_id}/time_entries', desc: 'Create individual time entries instead (will appear in timesheets)' }
                    ]
                },
                'create time entry': { 
                    answer: 'YES', 
                    question: 'Can I create time entries via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/users/{user_id}/time_entries', desc: 'Create a manual time entry' }
                    ],
                    notes: ['Created entries are marked as manual time', 'Requires start time, project, and user'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Cannot modify or delete existing entries', 'Cannot set activity levels (keyboard/mouse)']
                },
                'edit time': { 
                    answer: 'NO', 
                    question: 'Can I edit/modify existing time entries via the API?',
                    howTo: [],
                    notes: ['Existing time entries cannot be modified via API'],
                    requirements: [],
                    limitations: ['No PUT/PATCH endpoint for time entries', 'Time editing must be done in Hubstaff UI'],
                    alternatives: []
                },
                'delete time entry': { 
                    answer: 'NO', 
                    question: 'Can I delete time entries via the API?',
                    howTo: [],
                    notes: ['Time entries cannot be deleted via API'],
                    requirements: [],
                    limitations: ['No DELETE endpoint exists', 'Deletion must be done in Hubstaff UI'],
                    alternatives: []
                },

                // ===== SCREENSHOTS =====
                'get screenshot': { 
                    answer: 'YES', 
                    question: 'Can I retrieve/view screenshots via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/screenshots', desc: 'List organization screenshots' },
                        { method: 'GET', endpoint: '/v2/projects/{project_id}/screenshots', desc: 'List project screenshots' }
                    ],
                    notes: ['Returns screenshot metadata and signed URLs', 'URLs are time-limited - download promptly'],
                    requirements: ['Team or Enterprise plan', 'Screenshots feature enabled'],
                    limitations: ['Read-only access']
                },
                'delete screenshot': { 
                    answer: 'NO', 
                    question: 'Can I delete screenshots via the API?',
                    howTo: [],
                    notes: ['Screenshots cannot be deleted via API'],
                    requirements: [],
                    limitations: ['No DELETE endpoint exists', 'Screenshot deletion must be done in Hubstaff UI'],
                    alternatives: []
                },

                // ===== WEBHOOKS =====
                'create webhook': { 
                    answer: 'YES', 
                    question: 'Can I create webhooks via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/webhooks', desc: 'Create organization webhook' },
                        { method: 'POST', endpoint: '/v2/projects/{project_id}/webhooks', desc: 'Create project webhook' },
                        { method: 'POST', endpoint: '/v2/users/me/webhooks', desc: 'Create user webhook' }
                    ],
                    notes: ['Requires endpoint verification after creation', 'Hubstaff sends POST with x-hs-verification header', 'Must activate webhook after verification'],
                    requirements: ['Team or Enterprise plan', 'HTTPS endpoint to receive webhooks'],
                    limitations: ['Cannot modify existing webhooks - delete and recreate instead']
                },
                'delete webhook': { 
                    answer: 'YES', 
                    question: 'Can I delete webhooks via the API?',
                    howTo: [
                        { method: 'DELETE', endpoint: '/v2/webhooks/{webhook_id}', desc: 'Delete a webhook' }
                    ],
                    notes: ['Webhooks can be removed at any time'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: []
                },

                // ===== USERS & MEMBERS =====
                'create user': { 
                    answer: 'INDIRECT', 
                    question: 'Can I create/add users via the API?',
                    howTo: [],
                    notes: ['Users cannot be created directly - they must accept an invitation'],
                    requirements: [],
                    limitations: ['No direct user creation endpoint'],
                    alternatives: [
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/invites', desc: 'Send an invitation to a new user' },
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/invites/bulk', desc: 'Send bulk invitations' }
                    ]
                },
                'invite user': { 
                    answer: 'YES', 
                    question: 'Can I invite users via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/invites', desc: 'Send invitation to one user' },
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/invites/bulk', desc: 'Send invitations to multiple users' }
                    ],
                    notes: ['Invitee receives email to join organization', 'Can set role and project assignments in invite'],
                    requirements: ['Team or Enterprise plan', 'Admin permissions'],
                    limitations: ['User must accept invite to become active member']
                },
                'remove user': { 
                    answer: 'YES', 
                    question: 'Can I remove users from an organization via the API?',
                    howTo: [
                        { method: 'PUT', endpoint: '/v2/organizations/{org_id}/update_members', desc: 'Update member status to remove them' }
                    ],
                    notes: ['Update member status/role to remove from organization'],
                    requirements: ['Team or Enterprise plan', 'Admin permissions'],
                    limitations: []
                },

                // ===== CLIENTS =====
                'create client': { 
                    answer: 'YES', 
                    question: 'Can I create clients via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/clients', desc: 'Create a new client' }
                    ],
                    notes: ['Can set client name, email, and other details'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: []
                },
                'delete client': { 
                    answer: 'NO', 
                    question: 'Can I delete clients via the API?',
                    howTo: [],
                    notes: ['Clients cannot be deleted via API'],
                    requirements: [],
                    limitations: ['No DELETE endpoint exists', 'Client deletion must be done in Hubstaff UI'],
                    alternatives: [
                        { method: 'PUT', endpoint: '/v2/clients/{client_id}', desc: 'Update client to mark as inactive instead' }
                    ]
                },

                // ===== ATTENDANCE & CHECK-IN =====
                'get attendance': { 
                    answer: 'YES', 
                    question: 'Can I get attendance data via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/attendance_shifts', desc: 'Get actual working periods' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/attendance_schedules', desc: 'Get expected work schedules' }
                    ],
                    notes: ['Attendance is derived from activity tracking times', 'Shifts show actual work periods based on first/last activity'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Read-only - cannot mark attendance directly']
                },
                'check in': { 
                    answer: 'INDIRECT', 
                    question: 'Can I track check-in/check-out via the API?',
                    howTo: [],
                    notes: ['There is no direct "check-in" endpoint, but attendance can be tracked two ways'],
                    requirements: [],
                    limitations: ['No explicit check-in/check-out endpoint'],
                    alternatives: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/activities', desc: 'Option 1: Activity-based - First activity = start of day, last activity = end of day. Included in all plans.' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/job_site_visits', desc: 'Option 2: GPS Geofencing - Explicit check-in when entering a geofenced Job Site. Requires Locations add-on.' }
                    ]
                },
                'check out': { 
                    answer: 'INDIRECT', 
                    question: 'Can I track check-in/check-out via the API?',
                    howTo: [],
                    notes: ['There is no direct "check-out" endpoint, but attendance can be tracked two ways'],
                    requirements: [],
                    limitations: ['No explicit check-in/check-out endpoint'],
                    alternatives: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/activities', desc: 'Option 1: Activity-based - First activity = start of day, last activity = end of day. Included in all plans.' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/job_site_visits', desc: 'Option 2: GPS Geofencing - Explicit check-out when leaving a geofenced Job Site. Requires Locations add-on.' }
                    ]
                },

                // ===== JOB SITES =====
                'create job site': { 
                    answer: 'YES', 
                    question: 'Can I create job sites via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/job_sites', desc: 'Create a geofenced job site' }
                    ],
                    notes: ['Define location coordinates and geofence radius', 'Can assign members to job sites'],
                    requirements: ['Team or Enterprise plan', 'Locations add-on'],
                    limitations: ['Cannot delete job sites via API']
                },
                'delete job site': { 
                    answer: 'NO', 
                    question: 'Can I delete job sites via the API?',
                    howTo: [],
                    notes: ['Job sites cannot be deleted via API'],
                    requirements: [],
                    limitations: ['No DELETE endpoint exists'],
                    alternatives: [
                        { method: 'PUT', endpoint: '/v2/job_sites/{job_site_id}', desc: 'Disable or archive the job site instead' }
                    ]
                },

                // ===== LOCATIONS =====
                'get location': { 
                    answer: 'YES', 
                    question: 'Can I get GPS location data via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/locations', desc: 'Get organization location data' },
                        { method: 'GET', endpoint: '/v2/projects/{project_id}/locations', desc: 'Get project location data' }
                    ],
                    notes: ['Returns GPS coordinates and timestamps', 'Data comes from mobile app tracking'],
                    requirements: ['Team or Enterprise plan', 'Locations add-on', 'Mobile app usage'],
                    limitations: ['Read-only - cannot set location data']
                },
                'track location': { 
                    answer: 'YES', 
                    question: 'Can I track GPS locations via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/locations', desc: 'Get GPS tracking data' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/job_site_visits', desc: 'Get job site arrival/departure data' }
                    ],
                    notes: ['Location data recorded by Hubstaff mobile app', 'Job site visits provide geofenced check-in/out'],
                    requirements: ['Team or Enterprise plan', 'Locations add-on'],
                    limitations: ['Read-only - locations are recorded by the app, not set via API']
                },

                // ===== TIME OFF =====
                'get time off': { 
                    answer: 'YES', 
                    question: 'Can I get time off / PTO data via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/time_off_requests', desc: 'List time off requests' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/time_off_policies', desc: 'List time off policies' }
                    ],
                    notes: ['Read-only access to PTO requests and balances'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Cannot create or approve requests via API']
                },
                'create time off': { 
                    answer: 'NO', 
                    question: 'Can I create time off requests via the API?',
                    howTo: [],
                    notes: ['Time off requests must be created in Hubstaff UI'],
                    requirements: [],
                    limitations: ['No POST endpoint for time off requests', 'No approval workflow via API'],
                    alternatives: []
                },

                // ===== INVOICES =====
                'get invoice': { 
                    answer: 'YES', 
                    question: 'Can I get invoice data via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/client_invoices', desc: 'List client invoices' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/team_invoices', desc: 'List team invoices' }
                    ],
                    notes: ['Read-only access to invoice data'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Cannot create or modify invoices via API']
                },
                'create invoice': { 
                    answer: 'NO', 
                    question: 'Can I create invoices via the API?',
                    howTo: [],
                    notes: ['Invoices must be created in Hubstaff UI'],
                    requirements: [],
                    limitations: ['No POST endpoint for invoices'],
                    alternatives: []
                },

                // ===== TEAMS =====
                'create team': { 
                    answer: 'YES', 
                    question: 'Can I create teams via the API?',
                    howTo: [
                        { method: 'POST', endpoint: '/v2/organizations/{org_id}/teams', desc: 'Create a new team' }
                    ],
                    notes: ['Full CRUD supported for teams'],
                    requirements: ['Team or Enterprise plan', 'Admin permissions'],
                    limitations: []
                },
                'delete team': { 
                    answer: 'YES', 
                    question: 'Can I delete teams via the API?',
                    howTo: [
                        { method: 'DELETE', endpoint: '/v2/teams/{team_id}', desc: 'Delete a team' }
                    ],
                    notes: ['Teams can be permanently deleted'],
                    requirements: ['Team or Enterprise plan', 'Admin permissions'],
                    limitations: ['Deletion is permanent']
                },

                // ===== INTEGRATIONS =====
                'sync payroll': { 
                    answer: 'YES', 
                    question: 'Can I sync data with payroll systems via the API?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/timesheets', desc: 'Export timesheet data for payroll' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/activities', desc: 'Get detailed activity data' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/team_payments', desc: 'Get payment records' }
                    ],
                    notes: ['Export aggregated time data for payroll processing', 'Supports date range filtering'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Read-only - data flows from Hubstaff to payroll system']
                },
                'integrate erp': { 
                    answer: 'YES', 
                    question: 'Can the Hubstaff API integrate with ERP systems?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/timesheets', desc: 'Sync timesheet data' },
                        { method: 'GET/POST/PUT', endpoint: '/v2/.../projects', desc: 'Sync projects bi-directionally' },
                        { method: 'GET/POST/PUT/DELETE', endpoint: '/v2/.../tasks', desc: 'Sync tasks bi-directionally' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/members', desc: 'Sync user/employee data' }
                    ],
                    notes: ['Full API access for ERP integrations', 'Projects and tasks support bi-directional sync', 'Timesheets and activities are read-only'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Rate limit: 350 requests/minute']
                },
                'integrate odoo': { 
                    answer: 'YES', 
                    question: 'Can the Hubstaff API integrate with Odoo?',
                    howTo: [
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/timesheets', desc: 'Sync timesheets to Odoo' },
                        { method: 'GET/POST/PUT', endpoint: '/v2/.../projects', desc: 'Sync projects with Odoo' },
                        { method: 'GET', endpoint: '/v2/organizations/{org_id}/activities', desc: 'Sync attendance data to Odoo' }
                    ],
                    notes: ['Commonly used for timesheet and attendance sync', 'Projects can sync bi-directionally'],
                    requirements: ['Team or Enterprise plan'],
                    limitations: ['Timesheets are read-only in Hubstaff', 'Rate limit: 350 requests/minute']
                }
            };

            // Check for matches
            for (const [key, data] of Object.entries(capabilities)) {
                if (q.includes(key) || key.split(' ').every(word => q.includes(word))) {
                    return data;
                }
            }

            // Fuzzy matching for common variations
            const fuzzyMatches = [
                { patterns: ['create', 'add', 'new', 'make'], subject: 'project', key: 'create project' },
                { patterns: ['create', 'add', 'new', 'make'], subject: 'task', key: 'create task' },
                { patterns: ['delete', 'remove', 'destroy'], subject: 'project', key: 'delete project' },
                { patterns: ['delete', 'remove', 'destroy'], subject: 'task', key: 'delete task' },
                { patterns: ['edit', 'update', 'modify', 'change'], subject: 'project', key: 'update project' },
                { patterns: ['edit', 'update', 'modify', 'change'], subject: 'task', key: 'update task' },
                { patterns: ['get', 'view', 'see', 'read', 'fetch', 'retrieve', 'export', 'pull'], subject: 'timesheet', key: 'get timesheet' },
                { patterns: ['create', 'add', 'make', 'post', 'push'], subject: 'timesheet', key: 'create timesheet' },
                { patterns: ['create', 'add', 'log', 'record'], subject: 'time entry', key: 'create time entry' },
                { patterns: ['edit', 'update', 'modify', 'change'], subject: 'time', key: 'edit time' },
                { patterns: ['get', 'view', 'see', 'read', 'fetch', 'retrieve'], subject: 'screenshot', key: 'get screenshot' },
                { patterns: ['delete', 'remove'], subject: 'screenshot', key: 'delete screenshot' },
                { patterns: ['create', 'add', 'set up', 'setup', 'configure'], subject: 'webhook', key: 'create webhook' },
                { patterns: ['delete', 'remove'], subject: 'webhook', key: 'delete webhook' },
                { patterns: ['create', 'add', 'new'], subject: 'user', key: 'create user' },
                { patterns: ['invite', 'add'], subject: 'user', key: 'invite user' },
                { patterns: ['remove', 'delete'], subject: 'user', key: 'remove user' },
                { patterns: ['create', 'add', 'new'], subject: 'client', key: 'create client' },
                { patterns: ['delete', 'remove'], subject: 'client', key: 'delete client' },
                { patterns: ['check', 'clock'], subject: 'in', key: 'check in' },
                { patterns: ['check', 'clock'], subject: 'out', key: 'check out' },
                { patterns: ['get', 'view', 'fetch', 'retrieve'], subject: 'attendance', key: 'get attendance' },
                { patterns: ['create', 'add', 'new'], subject: 'job site', key: 'create job site' },
                { patterns: ['delete', 'remove'], subject: 'job site', key: 'delete job site' },
                { patterns: ['get', 'view', 'track', 'fetch'], subject: 'location', key: 'get location' },
                { patterns: ['get', 'view', 'track', 'fetch'], subject: 'gps', key: 'track location' },
                { patterns: ['get', 'view', 'fetch'], subject: 'time off', key: 'get time off' },
                { patterns: ['get', 'view', 'fetch'], subject: 'pto', key: 'get time off' },
                { patterns: ['create', 'add', 'request'], subject: 'time off', key: 'create time off' },
                { patterns: ['create', 'add', 'request'], subject: 'pto', key: 'create time off' },
                { patterns: ['get', 'view', 'fetch', 'export'], subject: 'invoice', key: 'get invoice' },
                { patterns: ['create', 'add', 'make'], subject: 'invoice', key: 'create invoice' },
                { patterns: ['create', 'add', 'new'], subject: 'team', key: 'create team' },
                { patterns: ['delete', 'remove'], subject: 'team', key: 'delete team' },
                { patterns: ['sync', 'integrate', 'connect', 'export'], subject: 'payroll', key: 'sync payroll' },
                { patterns: ['sync', 'integrate', 'connect'], subject: 'erp', key: 'integrate erp' },
                { patterns: ['sync', 'integrate', 'connect'], subject: 'odoo', key: 'integrate odoo' },
            ];

            for (const match of fuzzyMatches) {
                const hasPattern = match.patterns.some(p => q.includes(p));
                const hasSubject = q.includes(match.subject);
                if (hasPattern && hasSubject && capabilities[match.key]) {
                    return capabilities[match.key];
                }
            }

            return null;
        }

        function renderCanDoResult(result) {
            const statusClass = result.answer === 'YES' ? 'status-supported' : 
                               result.answer === 'NO' ? 'status-unavailable' : 'status-indirect';
            const statusIcon = result.answer === 'YES' ? '‚úÖ' : 
                              result.answer === 'NO' ? '‚ùå' : '‚ö†Ô∏è';
            const boxClass = result.answer === 'YES' ? 'success' : 'warning';

            let html = `
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <span class="status-badge ${statusClass}" style="font-size: 1.5rem; padding: 0.75rem 2rem;">
                        ${statusIcon} ${result.answer}
                    </span>
                </div>

                <div class="info-box" style="background: rgba(59, 130, 246, 0.1); border-color: rgba(59, 130, 246, 0.2); margin-bottom: 1rem;">
                    <span class="info-icon">üìã</span>
                    <div class="info-content">
                        <strong>What you're asking:</strong><br>
                        ${result.question}
                    </div>
                </div>
            `;

            // HOW TO ACHIEVE THIS (for YES answers)
            if (result.answer === 'YES' && result.howTo && result.howTo.length > 0) {
                html += `
                    <div class="info-box ${boxClass}" style="margin-bottom: 1rem;">
                        <span class="info-icon">‚úÖ</span>
                        <div class="info-content">
                            <strong>How to achieve this:</strong><br><br>
                            ${result.howTo.map(h => `
                                <div style="margin-bottom: 0.5rem;">
                                    <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">
                                        <span class="method-badge method-${h.method.toLowerCase().split('/')[0]}" style="font-size: 0.65rem; padding: 2px 4px; margin-right: 4px;">${h.method}</span>
                                        ${h.endpoint}
                                    </code>
                                    <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 2px; margin-left: 4px;">‚Ü≥ ${h.desc}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // WHY NOT & ALTERNATIVES (for NO answers)
            if (result.answer === 'NO') {
                html += `
                    <div class="info-box warning" style="margin-bottom: 1rem;">
                        <span class="info-icon">‚ùå</span>
                        <div class="info-content">
                            <strong>Why this isn't possible:</strong><br>
                            <ul style="margin: 0.5rem 0 0 1rem;">
                                ${result.limitations.map(l => `<li>${l}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;

                if (result.alternatives && result.alternatives.length > 0) {
                    html += `
                        <div class="info-box" style="background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.2); margin-bottom: 1rem;">
                            <span class="info-icon">üí°</span>
                            <div class="info-content">
                                <strong>Alternative approach:</strong><br><br>
                                ${result.alternatives.map(a => `
                                    <div style="margin-bottom: 0.5rem;">
                                        <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">
                                            <span class="method-badge method-${a.method.toLowerCase()}" style="font-size: 0.65rem; padding: 2px 4px; margin-right: 4px;">${a.method}</span>
                                            ${a.endpoint}
                                        </code>
                                        <div style="font-size: 0.85rem; color: var(--text-muted); margin-top: 2px; margin-left: 4px;">‚Ü≥ ${a.desc}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
            }

            // INDIRECT - Show alternatives as the main way to achieve it
            if (result.answer === 'INDIRECT') {
                html += `
                    <div class="info-box warning" style="margin-bottom: 1rem;">
                        <span class="info-icon">‚ö†Ô∏è</span>
                        <div class="info-content">
                            <strong>Why this is indirect:</strong><br>
                            <ul style="margin: 0.5rem 0 0 1rem;">
                                ${result.limitations.map(l => `<li>${l}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;

                if (result.alternatives && result.alternatives.length > 0) {
                    html += `
                        <div class="info-box success" style="margin-bottom: 1rem;">
                            <span class="info-icon">‚úÖ</span>
                            <div class="info-content">
                                <strong>How to achieve this instead:</strong><br><br>
                                ${result.alternatives.map(a => `
                                    <div style="margin-bottom: 0.75rem;">
                                        <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">
                                            <span class="method-badge method-${a.method.toLowerCase()}" style="font-size: 0.65rem; padding: 2px 4px; margin-right: 4px;">${a.method}</span>
                                            ${a.endpoint}
                                        </code>
                                        <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px; margin-left: 4px;">‚Ü≥ ${a.desc}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
            }

            // NOTES (always show if present)
            if (result.notes && result.notes.length > 0) {
                html += `
                    <div class="info-box" style="margin-bottom: 1rem;">
                        <span class="info-icon">üìù</span>
                        <div class="info-content">
                            <strong>Notes:</strong>
                            <ul style="margin: 0.5rem 0 0 1rem;">
                                ${result.notes.map(n => `<li>${n}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            // REQUIREMENTS (show if present)
            if (result.requirements && result.requirements.length > 0) {
                html += `
                    <div class="info-box" style="background: rgba(139, 92, 246, 0.1); border-color: rgba(139, 92, 246, 0.2); margin-bottom: 1rem;">
                        <span class="info-icon">üìã</span>
                        <div class="info-content">
                            <strong>Requirements:</strong>
                            <ul style="margin: 0.5rem 0 0 1rem;">
                                ${result.requirements.map(r => `<li>${r}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateSummary(query, matches) {
            let summary = "";

            // Check for "Can the customer do X?" type questions
            const isCanQuestion = query.includes('can ') || query.includes('able to') || query.includes('possible') || query.includes('does') || query.includes('is it possible');
            const canDoResult = checkCanDo(query);

            if (isCanQuestion && canDoResult) {
                return renderCanDoResult(canDoResult);
            }

            // ERP/Odoo integration query
            if (query.includes('erp') || query.includes('odoo') || query.includes('integration')) {
                summary = `<p><strong>Yes, the Hubstaff API is available for third-party ERP integrations</strong> like Odoo.</p>
                <div class="info-box success">
                    <span class="info-icon">‚úÖ</span>
                    <div class="info-content">
                        <strong>API Access Plans:</strong> Team and Enterprise plans include full API access. Starter plans have limited or no API access.
                    </div>
                </div>
                <p><strong>What you can sync:</strong></p>
                <ul style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
                    <li><span class="status-badge status-supported">‚úì Supported</span> <strong>Timesheets & Work Hours</strong> - Full access via /v2/timesheets and /v2/activities endpoints</li>
                    <li><span class="status-badge status-supported">‚úì Supported</span> <strong>Projects & Tasks</strong> - Full CRUD operations available</li>
                    <li><span class="status-badge status-supported">‚úì Supported</span> <strong>Users & Members</strong> - Read access to user data</li>
                    <li><span class="status-badge status-indirect">~ Indirect</span> <strong>Attendance</strong> - Derived from activity start/stop times. For explicit check-in/check-out, use Job Site Visits API with geofencing.</li>
                </ul>
                <div class="info-box warning">
                    <span class="info-icon">‚ö†Ô∏è</span>
                    <div class="info-content">
                        <strong>Rate Limit:</strong> 350 requests per minute. Use X-RateLimit headers to track usage.
                    </div>
                </div>`;
            }
            // Attendance query
            else if (query.includes('attendance') || query.includes('check-in') || query.includes('check-out') || query.includes('checkin') || query.includes('checkout')) {
                summary = `<p><strong>Attendance tracking in Hubstaff works in two ways:</strong></p>
                <div class="info-box success">
                    <span class="info-icon">‚úÖ</span>
                    <div class="info-content">
                        <strong>Option 1 - Activity-Based:</strong> Attendance is derived from the first and last activity timestamps each day. Use the Activities API to get this data.
                    </div>
                </div>
                <div class="info-box success">
                    <span class="info-icon">‚úÖ</span>
                    <div class="info-content">
                        <strong>Option 2 - Job Site Visits (Geofencing):</strong> For explicit check-in/check-out, use the Job Sites and Job Site Visits APIs. This provides GPS-based arrival/departure tracking at defined locations.
                    </div>
                </div>
                <p>The <strong>Attendance Schedules API</strong> lets you define expected work hours, and <strong>Attendance Shifts</strong> track actual working periods.</p>`;
            }
            // Time tracking query
            else if (query.includes('time') || query.includes('tracking') || query.includes('timesheet')) {
                summary = `<p><strong>Hubstaff provides comprehensive time tracking data via the API:</strong></p>
                <ul style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
                    <li><strong>Activities</strong> - Granular time tracking with keyboard/mouse activity levels</li>
                    <li><strong>Timesheets</strong> - Aggregated time data for reporting and payroll</li>
                    <li><strong>Time Entries</strong> - Individual start/stop time records</li>
                    <li><strong>Daily Summaries</strong> - Pre-aggregated daily totals</li>
                </ul>
                <p>All endpoints support date range filtering and can be scoped by organization or project.</p>`;
            }
            // Webhooks query
            else if (query.includes('webhook') || query.includes('notification') || query.includes('real-time')) {
                summary = `<p><strong>Webhooks enable real-time event notifications:</strong></p>
                <div class="info-box success">
                    <span class="info-icon">‚úÖ</span>
                    <div class="info-content">
                        Create webhooks at organization, project, or user level. Events include time entries, activities, screenshots, project/task changes, and user updates.
                    </div>
                </div>
                <p><strong>Setup process:</strong></p>
                <ol style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
                    <li>POST to /v2/organizations/{org_id}/webhooks with your endpoint URL</li>
                    <li>Hubstaff sends a verification POST with x-hs-verification header</li>
                    <li>Return the verification token to confirm</li>
                    <li>Activate the webhook via /v2/webhooks/{id}/activate</li>
                </ol>`;
            }
            // Authentication query
            else if (query.includes('auth') || query.includes('oauth') || query.includes('token')) {
                summary = `<p><strong>Hubstaff supports multiple authentication methods:</strong></p>
                <ul style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
                    <li><strong>OAuth 2.0</strong> - For third-party applications requiring user authorization</li>
                    <li><strong>Personal Access Tokens (PAT)</strong> - For direct API access by account owners</li>
                    <li><strong>App Tokens</strong> - For server-to-server integrations</li>
                </ul>
                <p>All requests require a Bearer token in the Authorization header.</p>`;
            }
            // Rate limits query
            else if (query.includes('rate') || query.includes('limit')) {
                summary = `<p><strong>API Rate Limiting:</strong></p>
                <div class="info-box warning">
                    <span class="info-icon">‚ö°</span>
                    <div class="info-content">
                        <strong>350 requests per minute</strong> per authentication token
                    </div>
                </div>
                <p>Monitor your usage with response headers:</p>
                <ul style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
                    <li><code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">X-RateLimit-Limit</code> - Maximum requests allowed</li>
                    <li><code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">X-RateLimit-Remaining</code> - Requests remaining in window</li>
                    <li><code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">X-RateLimit-Reset</code> - Timestamp when limit resets</li>
                </ul>
                <p>Use exponential backoff when receiving 429 Too Many Requests responses.</p>`;
            }
            // Plan/pricing query
            else if (query.includes('plan') || query.includes('pricing') || query.includes('subscription')) {
                summary = `<p><strong>API Access by Plan:</strong></p>
                <ul style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
                    <li><span class="status-badge status-unavailable">‚úó</span> <strong>Starter</strong> - Limited or no API access</li>
                    <li><span class="status-badge status-supported">‚úì</span> <strong>Team</strong> - Full API access included</li>
                    <li><span class="status-badge status-supported">‚úì</span> <strong>Enterprise</strong> - Full API access with potential for higher rate limits</li>
                </ul>
                <p>API tokens are managed in the organization settings by account administrators.</p>`;
            }
                // Developer resources query
            else if (query.includes('developer') || query.includes('example') || query.includes('code') || query.includes('postman') || query.includes('node') || query.includes('php') || query.includes('getting started') || query.includes('setup') || query.includes('jwt') || query.includes('openid')) {
                summary = `<p><strong>Developer Resources for Hubstaff API Integration:</strong></p>
                <div class="info-box success">
                    <span class="info-icon">üìñ</span>
                    <div class="info-content">
                        <strong>Official Documentation:</strong><br>
                        ‚Ä¢ <a href="https://developer.hubstaff.com/" target="_blank" style="color: var(--primary);">API Docs & Interactive Explorer</a><br>
                        ‚Ä¢ <a href="https://developer.hubstaff.com/authentication" target="_blank" style="color: var(--primary);">Authentication Guide</a>
                    </div>
                </div>
                <div class="info-box">
                    <span class="info-icon">üíª</span>
                    <div class="info-content">
                        <strong>Official Code Examples:</strong><br>
                        ‚Ä¢ <a href="https://github.com/NetsoftHoldings/public-api-nodejs-demo" target="_blank" style="color: var(--accent-blue);">Node.js Demo</a> - Express.js with openid-client<br>
                        ‚Ä¢ <a href="https://github.com/NetsoftHoldings/public-api-php-demo" target="_blank" style="color: var(--accent-blue);">PHP Demo</a> - CLI tool with php-openid-client<br>
                        ‚Ä¢ <a href="https://github.com/NetsoftHoldings/public-api-postman" target="_blank" style="color: var(--accent-blue);">Postman Collection</a> - Ready for API testing
                    </div>
                </div>
                <div class="info-box warning">
                    <span class="info-icon">üîê</span>
                    <div class="info-content">
                        <strong>Key URLs:</strong><br>
                        ‚Ä¢ API Base: <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">https://api.hubstaff.com/v2/</code><br>
                        ‚Ä¢ Auth Domain: <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">https://account.hubstaff.com/</code><br>
                        ‚Ä¢ OpenID Discovery: <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">https://account.hubstaff.com/.well-known/openid-configuration</code>
                    </div>
                </div>
                <p><strong>Token Setup:</strong> Create a <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">configState.json</code> with your refresh_token. The demos auto-refresh access tokens as needed.</p>`;
            }
            // Default summary
            else {
                summary = `<p>Based on your query, here are the relevant Hubstaff API capabilities:</p>`;
                if (matches.length > 0) {
                    summary += `<p>Found <strong>${matches.length} relevant API categories</strong> that may help with your integration.</p>`;
                }
            }

            return summary;
        }

        function getRelatedTopics(matchedCategories) {
            const allTopics = Object.keys(apiKnowledge).filter(k => !matchedCategories.has(k));
            return allTopics.slice(0, 6).map(k => apiKnowledge[k].title);
        }

        function displayResults(results, query) {
    const section = document.getElementById('resultsSection');
    // Clear previous results completely before showing new ones
    section.innerHTML = '';

            // Find relevant capabilities for this query
            const relevantCapabilities = findRelevantCapabilities(query);

            let html = '';
            
            // Add capabilities section if we found relevant ones
            if (relevantCapabilities.length > 0) {
                html += renderCapabilitiesSection(relevantCapabilities);
            }

            html += `
                <div class="answer-card">
                    <div class="answer-header">
                        <div class="answer-icon">üí°</div>
                        <div class="answer-title">API Capability Analysis</div>
                    </div>
                    <div class="answer-content">
                        ${results.summary}
                    </div>
                </div>
            `;

            // Show matched endpoints
            if (results.matches.length > 0) {
                results.matches.forEach(match => {
                    if (match.endpoints && match.endpoints.length > 0) {
                        html += `
                            <div class="category-section">
                                <div class="category-header" onclick="toggleCategory(this)">
                                    <div class="category-icon">${match.icon}</div>
                                    <div class="category-title">${match.title}</div>
                                    <div class="category-count">${match.endpoints.length} endpoints</div>
                                    <span>‚ñº</span>
                                </div>
                                <div class="category-content">
                                    <div class="endpoints-grid">
                                        ${match.endpoints.map(ep => `
                                            <div class="endpoint-card">
                                                <div class="endpoint-header">
                                                    <span class="method-badge method-${ep.method.toLowerCase()}">${ep.method}</span>
                                                    <span class="endpoint-path">${ep.path}</span>
                                                </div>
                                                <div class="endpoint-description">${ep.desc}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                    ${match.details ? `
                                        <div class="info-box" style="margin-top: 1rem;">
                                            <span class="info-icon">‚ÑπÔ∏è</span>
                                            <div class="info-content">
                                                ${match.details.map(d => `<div>‚Ä¢ ${d}</div>`).join('')}
                                            </div>
                                        </div>
                                    ` : ''}
                                    ${match.notes ? `
                                        <div class="info-box warning" style="margin-top: 1rem;">
                                            <span class="info-icon">üí°</span>
                                            <div class="info-content">${match.notes}</div>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        `;
                    } else if (match.details) {
                        html += `
                            <div class="category-section">
                                <div class="category-header" onclick="toggleCategory(this)">
                                    <div class="category-icon">${match.icon}</div>
                                    <div class="category-title">${match.title}</div>
                                    <span>‚ñº</span>
                                </div>
                                <div class="category-content">
                                    <div class="info-box">
                                        <span class="info-icon">‚ÑπÔ∏è</span>
                                        <div class="info-content">
                                            ${match.details.map(d => `<div>‚Ä¢ ${d}</div>`).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                });
            }

            // Show Tasks API matched endpoints
            Object.entries(tasksApiKnowledge).forEach(([key, match]) => {
                if (query.toLowerCase().includes('task') || query.toLowerCase().includes('checklist') || query.toLowerCase().includes('kanban')) {
                    if (match.endpoints && match.endpoints.length > 0) {
                        html += `
                            <div class="category-section">
                                <div class="category-header" onclick="toggleCategory(this)" style="border-color: rgba(0, 212, 170, 0.3);">
                                    <div class="category-icon" style="background: rgba(0, 212, 170, 0.1); color: #00d4aa;">${match.icon}</div>
                                    <div class="category-title">${match.title}</div>
                                    <span style="background: rgba(0, 212, 170, 0.15); color: #00d4aa; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem;">TASKS API</span>
                                    <div class="category-count">${match.endpoints.length} endpoints</div>
                                    <span>‚ñº</span>
                                </div>
                                <div class="category-content">
                                    <div class="info-box" style="background: rgba(0, 212, 170, 0.1); border-color: rgba(0, 212, 170, 0.2);">
                                        <span class="info-icon" style="color: #00d4aa;">üìã</span>
                                        <div class="info-content">
                                            <strong>Hubstaff Tasks API</strong> (separate product)<br>
                                            Base URL: https://tasks.hubstaff.com/api
                                        </div>
                                    </div>
                                    <div class="endpoints-grid">
                                        ${match.endpoints.map(ep => `
                                            <div class="endpoint-card" style="border-color: rgba(0, 212, 170, 0.3);">
                                                <div class="endpoint-header">
                                                    <span class="method-badge method-${ep.method.toLowerCase()}">${ep.method}</span>
                                                    <span class="endpoint-path">${ep.path}</span>
                                                </div>
                                                <div class="endpoint-description">${ep.desc}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                    ${match.capabilities ? `
                                        <div class="info-box success" style="margin-top: 1rem;">
                                            <span class="info-icon">‚úÖ</span>
                                            <div class="info-content"><strong>Can Do:</strong> ${match.capabilities.join(', ')}</div>
                                        </div>
                                    ` : ''}
                                    ${match.limitations && match.limitations.length > 0 ? `
                                        <div class="info-box warning" style="margin-top: 1rem;">
                                            <span class="info-icon">‚ö†Ô∏è</span>
                                            <div class="info-content"><strong>Limitations:</strong> ${match.limitations.join(', ')}</div>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        `;
                    }
                }
            });

            // Support Tips - Always show helpful reminders
            html += `
                <div class="answer-card" style="border-color: rgba(139, 92, 246, 0.3); margin-top: 1.5rem;">
                    <div class="answer-header" style="border-bottom-color: rgba(139, 92, 246, 0.2);">
                        <div class="answer-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">üí°</div>
                        <div class="answer-title">Support Tips</div>
                    </div>
                    <div class="answer-content">
                        <div style="display: grid; gap: 0.75rem;">
                            <div style="display: flex; align-items: start; gap: 0.5rem;">
                                <span>üí∞</span>
                                <span><strong>Plan & Pricing:</strong> API access requires <strong>Team</strong> or <strong>Enterprise</strong> plan. <a href="https://hubstaff.com/pricing" target="_blank" style="color: var(--accent-purple);">View pricing page ‚Üí</a></span>
                            </div>
                            <div style="display: flex; align-items: start; gap: 0.5rem;">
                                <span>üìç</span>
                                <span><strong>Check-in/Check-out:</strong> Explicit attendance tracking requires the <strong>Locations add-on</strong> (Job Sites with geofencing). Activity-based attendance is included in all plans.</span>
                            </div>
                            <div style="display: flex; align-items: start; gap: 0.5rem;">
                                <span>‚ö°</span>
                                <span><strong>Rate Limits:</strong> 350 requests/minute per token. Use <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px;">X-RateLimit-Remaining</code> header to monitor.</span>
                            </div>
                            <div style="display: flex; align-items: start; gap: 0.5rem;">
                                <span>üîê</span>
                                <span><strong>Authentication:</strong> API tokens are managed in <strong>Settings ‚Üí Integrations ‚Üí API</strong> by organization admins.</span>
                            </div>
                            <div style="display: flex; align-items: start; gap: 0.5rem;">
                                <span>üìñ</span>
                                <span><strong>Developer Docs:</strong> <a href="https://developer.hubstaff.com/" target="_blank" style="color: var(--accent-purple);">API Documentation</a> ¬∑ <a href="https://developer.hubstaff.com/authentication" target="_blank" style="color: var(--accent-purple);">Auth Guide</a> ¬∑ <a href="https://github.com/NetsoftHoldings/public-api-postman" target="_blank" style="color: var(--accent-purple);">Postman Collection</a></span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Related topics
            if (results.relatedTopics.length > 0) {
                html += `
                    <div class="related-topics">
                        <div class="related-title">Related topics you might find useful:</div>
                        <div class="related-tags">
                            ${results.relatedTopics.map(topic => `
                                <span class="related-tag" onclick="quickSearch('${topic.toLowerCase()}')">${topic}</span>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            section.innerHTML = html;
        }

        function toggleCategory(element) {
            const content = element.nextElementSibling;
            const arrow = element.querySelector('span:last-child');
            content.classList.toggle('open');
            arrow.textContent = content.classList.contains('open') ? '‚ñ≤' : '‚ñº';
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('resultsSection').innerHTML = `
                <div class="empty-state" id="emptyState">
                    <div class="empty-icon">üí°</div>
                    <h3>Ask a question about Hubstaff API</h3>
                    <p>For example: "Can I sync timesheets with an ERP?" or "What authentication methods are supported?"</p>
                </div>
            `;
        }

        function copyAnswer() {
            const answerContent = document.querySelector('.answer-content');
            const text = answerContent.innerText;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn span:last-child');
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = 'Copy Response';
                }, 2000);
            });
        }

        function toggleMatrix() {
            const content = document.getElementById('matrixContent');
            const toggle = document.getElementById('matrixToggle');
            content.classList.toggle('open');
            toggle.textContent = content.classList.contains('open') ? '‚ñ≤' : '‚ñº';
        }

        document.addEventListener('DOMContentLoaded', () => {
    renderKnowledgeBase();
    
    // Render the capabilities matrix
    document.getElementById('matrixContent').innerHTML = renderCapabilitiesMatrix();
    
    // Enter key handler
    document.getElementById('searchInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            handleSearch();
        }
    });

    // Check for URL search parameter (from Error Diagnostic Tool)
    checkUrlSearch();
});

// Handle search parameter from URL (e.g., ?search=auth+not+authorized)
function checkUrlSearch() {
    const urlParams = new URLSearchParams(window.location.search);
    const searchQuery = urlParams.get('search');
    
    if (searchQuery) {
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.value = searchQuery;
            handleSearch();
            // Clean up URL without reloading
            window.history.replaceState({}, '', window.location.pathname);
        }
    }
}

        // =====================================================
        // HELP OVERLAY FUNCTIONS
        // =====================================================

        function openHelpOverlay() {
            document.getElementById('helpOverlay').classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeHelpOverlay() {
            document.getElementById('helpOverlay').classList.remove('open');
            document.body.style.overflow = '';
        }

        function showHelpSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.help-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all nav buttons
            document.querySelectorAll('.help-nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById('help-' + sectionId).classList.add('active');
            
            // Set active nav button
            event.target.classList.add('active');
        }

        // Close overlay when clicking outside the modal
        document.getElementById('helpOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeHelpOverlay();
            }
        });

        // Close overlay with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeHelpOverlay();
            }
        });
    </script>
</body>
</html>
